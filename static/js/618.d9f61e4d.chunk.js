"use strict";(self.webpackChunkplot_device=self.webpackChunkplot_device||[]).push([[618],{16777:function(t,n,e){e.d(n,{LG:function(){return i},M7:function(){return a},zs:function(){return s}});var r=new Date,a=r.getMonth(),s=r.getFullYear(),i=function(t,n){if(t&&n)return Math.floor((n.getTime()-t.getTime())/864e5+1)}},41696:function(t,n,e){e.d(n,{R:function(){return E},Z:function(){return M}});var r=e(29439),a=e(77019),s=e(88529),i=e(80485),o=e(54091),u=e(31185),c=e(5171),l=e(76923),d=e(6794),f=e(94162),h=e(48928),p=e(16398),x=e(30199),v=e(55194),j=e(45629),m=e(81872),g=e(72087),Z=e(4346),y=e(4565),D=e(67952),b=e(72791),S=e(16777),F=(new Intl.NumberFormat).format,k=e(80184),C=function(t){var n=t.data.filter((function(t){return t.hours})),e=n.sum("hours"),r=n.length;return(0,k.jsx)(E,{icon:(0,k.jsx)(a.Z,{}),title:"All Time",content:[["Games",r],["Hours",e]]})},P=function(t){var n=t.data.reduce((function(t,n){var e,r=null===(e=n.startDate)||void 0===e?void 0:e.getFullYear().toString();return r&&n.hours?(t[r]||(t[r]=[0,0]),t[r]=[t[r][0]+1,t[r][1]+n.hours],t):t}),{}),e=parseFloat((Object.values(n).sum(0)/Object.keys(n).length).toFixed(2)),r=parseFloat((Object.values(n).sum(1)/Object.keys(n).length).toFixed(2));return(0,k.jsx)(E,{icon:(0,k.jsx)(s.Z,{}),title:"Averages Per Year",content:[["Games",e],["Hours",r]]})},w=function(t){var n=t.data.filter((function(t){return"Beat"===t.status&&t.hours&&t.numDays})),e=Math.round(n.sum("hours")/n.length),r=Math.round(n.sum("numDays")/n.length);return(0,k.jsx)(E,{icon:(0,k.jsx)(i.Z,{}),title:"Averages Per Game",content:[["Hours",e],["Days To Beat",r]]})},T=function(t){var n=t.data.filter((function(t){var n;return(null===(n=t.startDate)||void 0===n?void 0:n.getFullYear())===S.zs&&t.hours})),e=n.sum("hours"),r=n.length;return(0,k.jsx)(E,{icon:(0,k.jsx)(o.Z,{}),title:"This Year So Far",content:[["Games",r],["Hours",e]]})},G=function(t){var n=t.data.filter((function(t){return t.hours&&t.startDate&&t.endDate})).sort((function(t,n){return t.endDate<n.endDate?1:-1})).slice(0,6);return(0,k.jsx)(H,{icon:(0,k.jsx)(u.Z,{}),title:"Recently Finished",content:n})},O=function(t){var n=t.data.filter((function(t){return t.hours&&t.startDate&&t.endDate})).sort((function(t,n){return t.hours<n.hours?1:-1})).slice(0,6);return(0,k.jsx)(H,{icon:(0,k.jsx)(c.Z,{}),title:"Most Played",content:n})},Y=function(t){var n,e=t.data,r=e.filter((function(t){return"Playing"===t.status})).sort((function(t,n){return t.startDate>n.startDate?1:-1}))[0],a=e.filter((function(t){return"Next"===t.status})).sort((function(t,n){return t.releaseDate>n.releaseDate?1:-1}))[0];return(0,k.jsx)(D.Z,{xs:12,md:4,children:(0,k.jsxs)(f.Z,{direction:"column",spacing:1,children:[r&&(0,k.jsxs)(h.Z,{sx:{flex:"0 1 auto"},children:[(0,k.jsx)(p.Z,{titleTypographyProps:{variant:"h6"},title:"Currently Playing",subheader:"Started ".concat(null===(n=r.startDate)||void 0===n?void 0:n.toLocaleDateString()),avatar:(0,k.jsx)(l.Z,{})}),(0,k.jsx)(x.Z,{component:"img",src:r.banner})]}),a&&(0,k.jsxs)(h.Z,{sx:{flex:"1 1 auto"},children:[(0,k.jsx)(p.Z,{titleTypographyProps:{variant:"h6"},title:"Next Up",subheader:"Releases ".concat(a.releaseDate.toLocaleDateString()),avatar:(0,k.jsx)(d.Z,{})}),(0,k.jsx)(x.Z,{component:"img",src:a.banner})]})]})})},H=function(t){var n=t.icon,e=t.title,r=t.content;return(0,k.jsx)(D.Z,{xs:6,md:4,children:(0,k.jsxs)(h.Z,{sx:{height:"100%"},children:[(0,k.jsx)(p.Z,{titleTypographyProps:{variant:"h6"},title:e,avatar:n}),(0,k.jsx)(v.Z,{children:(0,k.jsxs)(j.Z,{children:[r.map((function(t){var n;return(0,k.jsxs)(b.Fragment,{children:[(0,k.jsx)(m.Z,{variant:"middle",component:"li"}),(0,k.jsx)(g.ZP,{children:(0,k.jsx)(Z.Z,{secondaryTypographyProps:{component:"span"},primary:t.game,secondary:(0,k.jsxs)(f.Z,{direction:{xs:"column",md:"row"},justifyContent:"space-between",children:[(0,k.jsx)(y.Z,{children:null===(n=t.endDate)||void 0===n?void 0:n.toLocaleDateString()}),(0,k.jsx)(y.Z,{children:"".concat(F(t.hours)," Hours")})]})})})]},t.game)})),(0,k.jsx)(m.Z,{variant:"middle",component:"li"})]})})]})})},E=function(t){var n=t.icon,e=t.title,a=t.content,s="string"===typeof a?(0,k.jsx)(y.Z,{align:"right",variant:"h4",children:a}):(0,k.jsx)(f.Z,{divider:(0,k.jsx)(m.Z,{orientation:"vertical",flexItem:!0}),justifyContent:"space-evenly",direction:"row",children:a.map((function(t){var n=(0,r.Z)(t,2),e=n[0],a=n[1];return(0,k.jsxs)(f.Z,{direction:"column",children:[(0,k.jsx)(y.Z,{align:"center",variant:"h5",children:F(a)}),(0,k.jsx)(y.Z,{align:"center",sx:{fontSize:14},color:"text.secondary",children:e})]},a)}))});return(0,k.jsx)(D.Z,{xs:6,md:3,children:(0,k.jsxs)(h.Z,{sx:{height:"100%"},children:[(0,k.jsx)(p.Z,{titleTypographyProps:{variant:"h6"},title:e,avatar:n,sx:{paddingBottom:"5px"}}),(0,k.jsx)(v.Z,{sx:{paddingTop:"5px"},children:s})]})})},M=function(t){var n=t.data;return(0,k.jsxs)(D.Z,{container:!0,spacing:1,alignItems:"stretch",children:[(0,k.jsx)(C,{data:n}),(0,k.jsx)(T,{data:n}),(0,k.jsx)(P,{data:n}),(0,k.jsx)(w,{data:n}),(0,k.jsx)(O,{data:n}),(0,k.jsx)(G,{data:n}),(0,k.jsx)(Y,{data:n})]})}},70618:function(t,n,e){e.r(n),e.d(n,{default:function(){return K}});var r=e(84506),a=e(29439),s=e(94162),i=e(72791),o=e(48928),u=e(16398),c=e(54871),l=e(72900),d=e(11889),f=e(55194),h=e(16777),p=e(49703),x=e.n(p),v=e(54301),j=e.n(v),m=e(92640),g=e.n(m),Z=e(12067),y=(x().register([j(),g()]),(0,Z.Z)(x())),D=e(95175),b=e(70324),S=e(80184),F=function(t){var n=t.options,e=t.value,r=t.setValue;return(0,S.jsx)(D.Z,{variant:"standard",value:e,onChange:function(t){return r(t.target.value)},children:n.map((function(t){return(0,S.jsx)(b.Z,{value:t,children:t},t)}))})},k={none:!0,company:!0,format:!0,franchise:!1,game:!1,platform:!0,publisher:!1,rating:!0,status:!0},C=function(t,n,e,r){var s=t.reduce((function(t,a){var s,i,o="none"===n?"":a[n],u=r?null===(s=a.startDate)||void 0===s?void 0:s.toISOString().substring(0,7):null===(i=a.startDate)||void 0===i?void 0:i.getFullYear().toString();return u&&a.hours?(t[o]=t[o]||{},t[o][u]=(t[o][u]||0)+("Count"===e?1:a.hours),t):t}),{});return r&&Object.values(s).forEach((function(t){for(var n=0,e=Object.keys(t).sort()[0].split("-").map((function(t){return parseInt(t)})),r=(0,a.Z)(e,2),s=r[0],i=r[1],o=s;o<=h.zs;o++)for(var u=o===s?i:1;u<=(o===h.zs?h.M7+1:12);u++){var c=o+"-"+(u<10?"0":"")+u;n=t[c]=n+(t[c]||0)}})),s},P=function(t){var n=t.data,e=t.measure,r=(0,i.useState)("company"),s=(0,a.Z)(r,2),h=s[0],p=s[1],x=(0,i.useState)(!0),v=(0,a.Z)(x,2),j=v[0],m=v[1],g=(0,i.useState)(!0),Z=(0,a.Z)(g,2),D=Z[0],b=Z[1];j&&(D=!0);var P=C(n,h,e,j);return(0,S.jsxs)(o.Z,{children:[(0,S.jsx)(u.Z,{title:"Count"===e?"Games Played":"Hours Played",action:(0,S.jsxs)(c.Z,{children:[(0,S.jsx)(F,{options:Object.keys(k),value:h,setValue:p}),(0,S.jsx)(l.Z,{label:"Cumulative",control:(0,S.jsx)(d.Z,{checked:j,onChange:function(t,n){return m(n)}})}),(0,S.jsx)(l.Z,{label:"Stack",control:(0,S.jsx)(d.Z,{checked:D,onChange:function(t,n){return b(n)}})})]})}),(0,S.jsx)(f.Z,{children:(0,S.jsx)(y,{style:{width:"100%",height:"95vh"},data:Object.entries(P).map((function(t){var n=(0,a.Z)(t,2),e=n[0],r=n[1];return{type:j||!D?"scatter":"bar",name:e,x:Object.keys(r),y:Object.values(r),stackgroup:D?"*":void 0}})),config:{displayModeBar:!1,responsive:!0},layout:{showlegend:k[h],legend:{x:0,y:1,orientation:"h"},barmode:D?"stack":void 0,margin:{l:40,r:0,t:0,b:40},xaxis:{tickmode:"array"}}})})]})},w=e(97534),T=function(t){var n,e;return'\n    <div style="display: inline-block">\n        <ul style="list-style-type: none;padding: 5px">\n            <li>\n                <span><b>'.concat(t.game,'</b></span>\n            </li>\n        </ul>\n        <hr />\n        <ul style="list-style-type: none;padding-left: 10px">\n            <li>\n                <span><b>Hours: </b></span>\n                <span">').concat(t.hours,"</span>\n            </li>\n            <li>\n                <span><b>Period: </b></span>\n                <span>").concat(null===(n=t.startDate)||void 0===n?void 0:n.toLocaleDateString()," - ").concat(null===(e=t.endDate)||void 0===e?void 0:e.toLocaleDateString()," </span>\n            </li>\n            <li>\n                <span><b>Days: </b></span>\n                <span>").concat(t.numDays||"-","</span>\n            </li>\n        </ul>\n    </div>\n    ")},G=function(t){var n,e=t.data,r=(0,i.useState)(!1),s=(0,a.Z)(r,2),h=s[0],p=s[1],x=h?function(t){return t.company}:function(){return"*"},v=e.filter((function(t){var n=t.exactDate,e=t.startDate;return n&&e.getFullYear()>2014})).map((function(t){return[x(t),t.game,T(t),t.startDate,t.endDate]}));return n=h?"55vh":"30vh",(0,S.jsxs)(o.Z,{children:[(0,S.jsx)(u.Z,{title:"Timeline",action:(0,S.jsx)(c.Z,{row:!0,children:(0,S.jsx)(l.Z,{label:"Group Data",control:(0,S.jsx)(d.Z,{checked:h,onChange:function(t,n){return p(n)}})})})}),(0,S.jsx)(f.Z,{children:(0,S.jsx)("div",{style:{overflowX:"auto",overflowY:"hidden"},children:(0,S.jsx)(w.ZP,{width:"400vw",height:n,chartType:"Timeline",data:[[{type:"string",id:"Group"},{type:"string",id:"Game"},{type:"string",role:"tooltip"},{type:"date",id:"Start"},{type:"date",id:"End"}]].concat(v)},n)})})]})},O=e(32815),Y=e(82396),H=e(39727),E=e(9459),M=e(94609),L=e(77019),B=e(93811),I=e(94976),N=e(22485),z=e(55590),A=function(t){var n=t.setFilterFunc,e=t.measure,r=t.setMeasure,o=(0,i.useState)(!1),u=(0,a.Z)(o,2),c=u[0],l=u[1],d=(0,i.useState)(!1),f=(0,a.Z)(d,2),h=f[0],p=f[1],x=(0,i.useState)(!1),v=(0,a.Z)(x,2),j=v[0],m=v[1];(0,i.useEffect)((function(){var t=[c?function(t){return"Endless"!==t.status}:function(){return!0},h?function(t){return"Pok\xe9mon"!==t.franchise}:function(){return!0},j?function(t){var n=t.platform,e=t.startDate;if("PC"===n){if(null===e||void 0===e||!e.getFullYear()||(null===e||void 0===e?void 0:e.getFullYear())<2015)return!1}else if("Nintendo Switch"!==n&&"Nintendo 3DS"!==n&&"PlayStation 4"!==n&&"PlayStation 5"!==n)return!1;return!0}:function(){return!0}];n((function(){return function(n){return t.reduce((function(t,e){return t&&e(n)}),!0)}}))}),[c,h,j,n]);var g=function(t){return t?{sx:{backgroundColor:"primary.light","&:hover":{backgroundColor:"primary.dark"}}}:{}};return(0,S.jsxs)(s.Z,{direction:"column",spacing:2,sx:{position:"fixed",right:function(t){return t.spacing(2)},bottom:function(t){return t.spacing(2)}},children:[(0,S.jsxs)(B.Z,{icon:(0,S.jsx)(I.Z,{icon:(0,S.jsx)(O.Z,{})}),ariaLabel:"add",children:[(0,S.jsx)(N.Z,{FabProps:g(c),tooltipOpen:!0,tooltipTitle:"Endless",icon:(0,S.jsx)(Y.Z,{}),onClick:function(){return l(!c)}}),(0,S.jsx)(N.Z,{FabProps:g(j),tooltipOpen:!0,tooltipTitle:"Unconfirmed",icon:(0,S.jsx)(H.Z,{}),onClick:function(){return m(!j)}}),(0,S.jsx)(N.Z,{FabProps:g(h),tooltipOpen:!0,tooltipTitle:"Pokemon",icon:(0,S.jsx)(E.Z,{}),onClick:function(){return p(!h)}})]}),(0,S.jsx)(z.Z,{color:"secondary",onClick:function(){return r("Count"===e?"Hours":"Count")},children:"Count"===e?(0,S.jsx)(M.Z,{}):(0,S.jsx)(L.Z,{})})]})},R=e(41696),V=e(93433),_=["company","format","franchise","game","platform","publisher","rating","status","startDate"],U=function(t){var n=t.data,e=t.setSunburstData,r=t.measure,s=[(0,i.useState)("company"),(0,i.useState)("platform"),(0,i.useState)("franchise")],o=s.map((function(t){return(0,a.Z)(t,1)[0]}));return(0,i.useEffect)((function(){var t=J(n,o,r);e(t)}),[e,n,r].concat((0,V.Z)(o))),(0,S.jsx)(c.Z,{children:s.map((function(t){var n=(0,a.Z)(t,2),e=n[0],r=n[1];return(0,S.jsx)(F,{options:_,value:e,setValue:r},e)}))})},J=function(t,n,e){var r=t.filter((function(t){return"Hours"!==e||void 0!==t.hours})).reduce((function(t,e){var r=n.map((function(t){return function(t,n){var e=t[n];return e instanceof Date?e.getFullYear().toString():e}(e,t)}));if(!r.every((function(t){return"string"===typeof t})))return t;var a=t;return r.forEach((function(t){return a=a[t]=a[t]||{}})),a[e.game]=e,t}),{}),s=[],i=[],o=[],u=[];return function t(n,r){var c=0;return Object.entries(n).sort((function(t,n){var e=(0,a.Z)(t,1)[0],r=(0,a.Z)(n,1)[0];return e.localeCompare(r)})).forEach((function(n){var l,d=(0,a.Z)(n,2),f=d[0],h=d[1];l=h.game?"Hours"===e?h.hours:1:t(h,"".concat(r,"-").concat(f)),i.push(f),o.push(r),u.push(l),s.push("".concat(r,"-").concat(f)),c+=l})),c}(r,""),{labels:i,parents:o,values:u,ids:s}},Q=function(t){var n=t.data,e=t.measure,r=(0,i.useState)({ids:[],labels:[],parents:[],values:[]}),s=(0,a.Z)(r,2),c=s[0],l=c.ids,d=c.labels,h=c.parents,p=c.values,x=s[1];return(0,S.jsxs)(o.Z,{children:[(0,S.jsx)(u.Z,{title:"Sunburst",action:(0,S.jsx)(U,{data:n,setSunburstData:x,measure:e})}),(0,S.jsx)(f.Z,{children:(0,S.jsx)(y,{style:{width:"100%",height:"95vh"},data:[{labels:d,parents:h,values:p,ids:l,type:"sunburst",branchvalues:"total",maxdepth:3,sort:!1}],config:{displayModeBar:!1,responsive:!0},layout:{margin:{l:0,r:0,b:0,t:0}}})})]})},X=function(t){var n=(0,r.Z)(t),e=n[0];return n.slice(1).map((function(t){return t.reduce((function(t,n,r){return t[e[r]]=n,t}),{})}))},q=function(t){gapi.client.sheets.spreadsheets.values.get({spreadsheetId:"1JCAN_lB2QaVxj1rD4f88mN4tHjmhxF3CZlGtZGwYCLk",range:"Games List!A:Z"}).then((function(t){return t.result.values})).then(X).then(t)},K=function(t){var n=t.hide,e=(0,i.useState)(),r=(0,a.Z)(e,2),o=r[0],u=r[1],c=(0,i.useState)((function(){return function(){return!0}})),l=(0,a.Z)(c,2),d=l[0],f=l[1],p=(0,i.useState)("Count"),x=(0,a.Z)(p,2),v=x[0],j=x[1];if((0,i.useEffect)((function(){return q(u)}),[]),!o||n)return console.log("no data"),null;var m=o.map((function(t){var n=t["Start Date"]?new Date(t["Start Date"]):void 0,e=t["End Date"]?new Date(t["End Date"]):void 0;return e&&t["End Date"].length<5&&e.setFullYear(e.getFullYear()+1),e=n&&(e||new Date),{game:t.Game,platform:t.Platform,company:t.Platform.split(" ")[0],franchise:t.Franchise,genre:t.Genre.split("\n"),theme:t.Theme.split("\n"),format:t.Format,publisher:t.Publisher,rating:t.Rating,status:t.Status,exactDate:!!t["Start Date"]&&t["Start Date"].length>5,startDate:n,endDate:e,releaseDate:new Date(t.Release),hours:t.Hours?parseInt(t.Hours):void 0,numDays:(0,h.LG)(n,e),banner:t.Banner}})).filter(d);return(0,S.jsxs)(s.Z,{spacing:2,children:[(0,S.jsx)(R.Z,{data:m}),(0,S.jsx)(G,{data:m}),(0,S.jsx)(Q,{data:m,measure:v}),(0,S.jsx)(P,{data:m,measure:v}),(0,S.jsx)(A,{setFilterFunc:f,measure:v,setMeasure:j})]})}}}]);
//# sourceMappingURL=618.d9f61e4d.chunk.js.map