import{r as d,_ as N,b,c as R,j as e,s as F,e as W,g as rt,f as lt,h as k,i as ct,u as it,k as ut,l as dt,d as E,C as B,T as C,a as S,E as K,m as pt}from"./index-mTVLBmNh.js";import{a as ht,D as x,s as q,c as xt,T as V,b as mt,d as Y,e as jt,f as G,U as gt,g as yt,A as ft,P as Ct,i as bt,h as Dt,j as vt,C as M,m as St,F as I,S as X,B as kt,k as Tt,l as Pt}from"./Timeline-CYJPFfwt.js";import{c as v,r as Rt,F as Z,p as Ft,i as Gt,a as $t}from"./types-NmRfzhmZ.js";import{a as Et,c as At,G as L,b as J,M as Q,T as Bt,F as T,S as P}from"./Timer-CaBTRXk5.js";import{a as tt,C as Mt}from"./index-_qugNN_q.js";import{S as z}from"./Stack-DrymOO3U.js";const It=["ownerState"];function et(t){return d.forwardRef(function(a,o){const l=N(a,It);return d.createElement(t,b({},l,{ref:o}))})}const Lt=R(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),zt=R(e.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),Ht=F("span",{shouldForwardProp:W})({position:"relative",display:"flex"}),Vt=F(Lt)({transform:"scale(1)"}),Yt=F(zt)(({theme:t,ownerState:s})=>b({left:0,position:"absolute",transform:"scale(0)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.shortest})},s.checked&&{transform:"scale(1)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.shortest})}));function st(t){const{checked:s=!1,classes:a={},fontSize:o}=t,l=b({},t,{checked:s});return e.jsxs(Ht,{className:a.root,ownerState:l,children:[e.jsx(Vt,{fontSize:o,className:a.background,ownerState:l}),e.jsx(Yt,{fontSize:o,className:a.dot,ownerState:l})]})}const _t=d.createContext(void 0);function wt(){return d.useContext(_t)}function Ot(t){return lt("MuiRadio",t)}const _=rt("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),Ut=["checked","checkedIcon","color","icon","name","onChange","size","className"],Nt=t=>{const{classes:s,color:a,size:o}=t,l={root:["root",`color${k(a)}`,o!=="medium"&&`size${k(o)}`]};return b({},s,dt(l,Ot,s))},Wt=F(Et,{shouldForwardProp:t=>W(t)||t==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,a.size!=="medium"&&s[`size${k(a.size)}`],s[`color${k(a.color)}`]]}})(({theme:t,ownerState:s})=>b({color:(t.vars||t).palette.text.secondary},!s.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${s.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette[s.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:ct(s.color==="default"?t.palette.action.active:t.palette[s.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},s.color!=="default"&&{[`&.${_.checked}`]:{color:(t.vars||t).palette[s.color].main}},{[`&.${_.disabled}`]:{color:(t.vars||t).palette.action.disabled}}));function Kt(t,s){return typeof s=="object"&&s!==null?t===s:String(t)===String(s)}const w=e.jsx(st,{checked:!0}),O=e.jsx(st,{}),at=d.forwardRef(function(s,a){const o=it({props:s,name:"MuiRadio"}),{checked:l,checkedIcon:n=w,color:i="primary",icon:c=O,name:r,onChange:p,size:g="medium",className:h}=o,y=N(o,Ut),m=b({},o,{color:i,size:g}),j=Nt(m),u=wt();let f=l;const D=At(p,u&&u.onChange);let $=r;return u&&(typeof f>"u"&&(f=Kt(u.value,o.value)),typeof $>"u"&&($=u.name)),e.jsx(Wt,b({type:"radio",icon:d.cloneElement(c,{fontSize:O.props.fontSize??g}),checkedIcon:d.cloneElement(n,{fontSize:w.props.fontSize??g}),ownerState:m,classes:j,name:$,checked:f,onChange:D,ref:a,className:ut(j.root,h)},y))}),qt=R(e.jsx("path",{d:"M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m-10 7H8v3H6v-3H3v-2h3V8h2v3h3zm4.5 2c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m4-3c-.83 0-1.5-.67-1.5-1.5S18.67 9 19.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"VideogameAsset"),Xt=R(e.jsx("path",{d:"M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67M11.71 19c-1.78 0-3.22-1.4-3.22-3.14 0-1.62 1.05-2.76 2.81-3.12 1.77-.36 3.6-1.21 4.62-2.58.39 1.29.59 2.65.59 4.04 0 2.65-2.15 4.8-4.8 4.8"}),"Whatshot"),ot=({item:t,...s})=>e.jsx(ht,{alt:t.name,image:t.banner,detailComponent:a=>{var o,l,n;return e.jsx(tt,{sx:{background:a,color:i=>a&&i.palette.getContrastText(a)},children:e.jsxs(L,{container:!0,spacing:1,children:[e.jsx(Zt,{colour:a,item:t}),e.jsx(x,{colour:a,label:"Start Date",value:t.exactDate?t.startDate.toLocaleDateString():(o=t.startDate)==null?void 0:o.getFullYear()}),e.jsx(x,{colour:a,label:"End Date",value:t.exactDate?(l=t.endDate)==null?void 0:l.toLocaleDateString():(n=t.endDate)==null?void 0:n.getFullYear()}),e.jsx(x,{colour:a,label:"Days To Beat",value:t.exactDate?t.numDays:void 0}),e.jsx(x,{colour:a,label:"Hours",value:t.hours}),e.jsx(x,{colour:q(t),label:"Status",value:t.status}),e.jsx(x,{colour:v(t),label:"Platform",value:t.platform}),e.jsx(x,{colour:a,label:"Release Date",value:t.releaseDate.toLocaleDateString()}),e.jsx(x,{colour:a,label:"Format",value:t.format}),e.jsx(x,{colour:a,label:"Developer",value:t.developer}),e.jsx(x,{colour:a,label:"Publisher",value:t.publisher}),e.jsx(x,{colour:a,label:"Franchise",value:t.franchise}),e.jsx(x,{colour:Rt(t),label:"PEGI",value:t.rating}),e.jsx(x,{colour:a,label:"Genre",value:t.genre}),e.jsx(x,{large:!0,colour:a,label:"Themes",value:t.theme.join(" - ")})]})})},...s}),A=new Date(2004,0,1),U=E(A,B),Zt=({colour:t,item:s})=>{if(!s.startDate||s.startDate<A)return null;const a=s.endDate?s.exactDate?s.endDate:new Date(s.startDate.getFullYear(),s.startDate.getMonth()+1,s.startDate.getDay()):B,l=E(A,s.startDate)/U*100,n=Math.max((s.numDays??E(s.startDate,a))/U*100,.5),i=100-n-l;return e.jsx(xt,{segments:[e.jsx(V,{percent:l},0),e.jsx(mt,{percent:n,backgroundColour:["secondary.dark","secondary.light"],tooltip:e.jsxs(e.Fragment,{children:[s.exactDate?e.jsxs(e.Fragment,{children:[e.jsxs(C,{children:["Played ",s.startDate.toLocaleDateString()," - ",a.toLocaleDateString()]}),e.jsxs(C,{children:[s.numDays," Days"]})]}):e.jsxs(C,{children:["Played in ",s.startDate.getFullYear()]}),e.jsxs(C,{children:[s.hours," Hours"]})]})},1),e.jsx(V,{percent:i},2)],colour:t})},Jt=({data:t,measure:s,yearType:a,yearTo:o,filterDispatch:l})=>e.jsxs(L,{container:!0,spacing:1,alignItems:"stretch",children:[e.jsx(te,{data:t,yearTo:o,yearType:a,filterDispatch:l}),e.jsx(ee,{data:t,yearTo:o,yearType:a,filterDispatch:l}),e.jsx(se,{data:t,yearType:a}),e.jsx(ae,{data:t}),e.jsx(Qt,{data:t,measure:s}),e.jsx(re,{data:t}),e.jsx(ne,{data:t}),e.jsx(oe,{data:t})]}),Qt=({data:t,measure:s})=>{const a=["Beat","Playing","Endless","Abandoned"],o=["Nintendo","PlayStation","PC","iOS","Xbox"],l=n=>s=="Games"?n.length:n.sum("hours");return e.jsx(L,{xs:12,sm:12,md:8,children:e.jsxs(z,{justifyContent:"space-between",height:"100%",spacing:1,children:[e.jsx(Y,{title:"Status",icon:e.jsx(jt,{}),data:t,measureFunc:l,groupKey:"status",group:a,groupToColour:n=>q({status:n}),measureLabel:s}),e.jsx(Y,{title:"Platforms",icon:e.jsx(qt,{}),data:t,measureFunc:l,groupKey:"company",group:o,groupToColour:n=>v({company:n}),measureLabel:s==="Games"?"Games":"Hours"})]})})},te=({data:t,yearType:s,yearTo:a,filterDispatch:o})=>{const l=t.filter(r=>r.hours),n=l.sum("hours"),i=l.length,c=e.jsx(Z,{variant:"standard",sx:{minWidth:130,margin:0},children:e.jsx(J,{SelectDisplayProps:{style:{padding:0}},value:a,displayEmpty:!0,onChange:r=>o({type:"updateFilter",filter:"yearTo",value:r.target.value}),renderValue:r=>e.jsx(C,{variant:"h6",children:r==S?"All Time":`Up To ${r}`}),slots:{root:et("span")},children:Array.from({length:S-K+1},(r,p)=>S-p).map(r=>e.jsx(Q,{value:r,children:r},r))})});return e.jsx(G,{icon:e.jsx(Bt,{}),title:c,action:e.jsx(at,{size:"small",checked:s=="upto",onChange:()=>o({type:"toggleYearType"})}),content:[["Games",i],["Hours",n]]})},ee=({data:t,yearTo:s,yearType:a,filterDispatch:o})=>{const l=t.filter(r=>r.startDate.getFullYear()===s&&r.hours),n=l.sum("hours"),i=l.length,c=e.jsx(Z,{variant:"standard",sx:{minWidth:120,margin:0},children:e.jsx(J,{SelectDisplayProps:{style:{padding:0}},value:s,displayEmpty:!0,onChange:r=>o({type:"updateFilter",filter:"yearTo",value:r.target.value}),renderValue:r=>e.jsxs(C,{variant:"h6",children:["In ",r]}),slots:{root:et("span")},children:Array.from({length:S-K+1},(r,p)=>S-p).map(r=>e.jsx(Q,{value:r,children:r},r))})});return e.jsx(G,{icon:e.jsx(gt,{}),title:c,action:e.jsx(at,{size:"small",checked:a=="matching",onChange:()=>o({type:"toggleYearType"})}),content:[["Games",i],["Hours",n]]})},se=({data:t,yearType:s})=>{if(s=="matching")return;const a=t.reduce((n,i)=>{var r;const c=(r=i.startDate)==null?void 0:r.getFullYear().toString();return!c||!i.hours||(n[c]??(n[c]=[0,0]),n[c]=[n[c][0]+1,n[c][1]+i.hours]),n},{}),o=parseFloat((Object.values(a).sum(0)/Object.keys(a).length).toFixed(2)),l=parseFloat((Object.values(a).sum(1)/Object.keys(a).length).toFixed(2));return e.jsx(G,{icon:e.jsx(yt,{}),title:"Yearly Average",content:[["Games",o],["Hours",l]]})},ae=({data:t})=>{const s=t.filter(l=>l.status==="Beat"&&l.hours&&l.numDays),a=Math.round(s.sum("hours")/s.length),o=Math.round(s.sum("numDays")/s.length);return e.jsx(G,{icon:e.jsx(ft,{}),title:"Game Average",content:[["Hours",a],["Days To Beat",o]]})},oe=({data:t})=>{const s=t.filter(({party:a})=>!a).filter(a=>a.hours&&a.startDate&&a.endDate).sortByKey("endDate").slice(0,6);return e.jsx(H,{icon:e.jsx(Ct,{}),title:"Recently Finished",content:s,labelComponent:nt})},ne=({data:t})=>{const s=t.filter(a=>a.hours&&a.startDate&&a.endDate).sortByKey("hours").slice(0,6);return e.jsx(H,{icon:e.jsx(Xt,{}),title:"Most Played",content:s,labelComponent:nt})},re=({data:t})=>{const s=t.filter(a=>a.status==="Playing").sortByKey("startDate").reverse();return s.length==0?null:e.jsx(H,{icon:e.jsx(bt,{}),title:"Currently Playing",content:s,labelComponent:le,width:[12,12,4],pictureWidth:[12,4,12],wrap:!1})},nt=t=>{var s;return[[((s=t.endDate)==null?void 0:s.toLocaleDateString())??"",`${Dt(t.hours)} Hours`]]},le=t=>{var s;return[[((s=t.startDate)==null?void 0:s.toLocaleDateString())??""]]},H=t=>e.jsx(vt,{aspectRatio:"16/9",divider:!0,chipComponent:Ft,landscape:!0,MediaComponent:ot,...t}),ce=t=>t.every(s=>typeof s=="string"),ie=({data:t,measure:s})=>{const a=pt(),o=[d.useState("company"),d.useState("platform"),d.useState("franchise")],{ids:l,labels:n,parents:i,values:c,colours:r}=d.useMemo(()=>pe(t,o.map(([p])=>p),s),[t,s,...o]);return e.jsxs(Mt,{children:[e.jsx(M,{title:"Sunburst",action:e.jsx(de,{controlStates:o})}),e.jsx(tt,{children:e.jsx(St,{style:{width:"100%",height:"95vh",maxHeight:"100vw"},data:[{labels:n,parents:i,values:c,ids:l,type:"sunburst",branchvalues:"total",maxdepth:3,sort:!1,marker:{line:{color:a.palette.background.paper},colors:r}}],config:{displayModeBar:!1,responsive:!0},layout:{margin:{l:0,r:0,b:0,t:0},paper_bgcolor:a.palette.mode==="dark"?"rgba(0,0,0,0)":void 0}})})]})},ue=["company","format","franchise","name","platform","publisher","genre","rating","status","startDate"],de=({controlStates:t})=>e.jsx(I,{children:t.map(([s,a],o)=>e.jsx(X,{options:ue,value:s,setValue:a},"sunburst-control-"+o))}),pe=(t,s,a)=>{const o=(h,y)=>{const m=h[y];return m instanceof Date?m.getFullYear().toString():m},l=t.filter(h=>!(a==="Hours"&&h.hours===void 0)).reduce((h,y)=>{const m=s.map(u=>o(y,u));if(!ce(m))return h;let j=h;return m.forEach(u=>j=j[u]=j[u]||{}),j[y.name]=y,h},{}),n=[],i=[],c=[],r=[],p=[],g=(h,y)=>{let m=0,j="";return Object.entries(h).sort(([u],[f])=>u.localeCompare(f)).forEach(([u,f])=>{let D;Gt(f)?(D=a==="Hours"?f.hours:1,s[0]==="company"&&(j=v(f))):[D,j]=g(f,`${y}-${u}`),i.push(u),c.push(y),r.push(D),n.push(`${y}-${u}`),p.push(j),m+=D}),[m,j]};return g(l,""),{labels:i,parents:c,values:r,ids:n,colours:p}},he={none:!0,company:!0,format:!0,franchise:!1,name:!1,platform:!0,developer:!1,publisher:!1,rating:!0,status:!0,genre:!0},xe=({data:t,measure:s,yearType:a})=>{const[o,l]=d.useState("company"),[n,i]=d.useState(!1),[c,r]=d.useState(!0),p=me(t,o,s,n,a);return e.jsx(kt,{grouped:p,cumulative:n,stack:c,children:e.jsx(M,{title:`${s} Played`,action:e.jsxs(I,{children:[e.jsx(X,{options:Object.keys(he),value:o,setValue:l}),e.jsxs(z,{direction:"row",children:[e.jsx(T,{label:"Cumulative",control:e.jsx(P,{checked:n,onChange:(g,h)=>i(h)})}),e.jsx(T,{label:"Stack",control:e.jsx(P,{checked:c,onChange:(g,h)=>r(h),disabled:n})})]})]})})})},me=(t,s,a,o,l)=>t.reduce((n,i)=>{var p,g;const c=s==="none"?"":i[s],r=o||l=="matching"?(p=i.startDate)==null?void 0:p.toISOString().substring(0,7):(g=i.startDate)==null?void 0:g.getFullYear().toString();return!r||!i.hours||(n[c]??(n[c]={color:s==="company"?v(i):"",data:{}}),n[c].data[r]=(n[c].data[r]||0)+(a==="Games"?1:i.hours)),n},{}),je=({data:t})=>{const[s,a]=d.useState(!1),[o,l]=d.useState(!1),n=s?({company:c})=>c:()=>"*",i=t.filter(({party:c})=>o||!c).filter(({exactDate:c,startDate:r})=>c&&r.getFullYear()>2014).map(c=>({row:n(c),name:c.name,tooltip:ge(c),colour:$t(c),start:c.startDate,end:c.endDate??B}));return e.jsx(Tt,{data:i,showRowLabels:s,children:e.jsx(M,{title:"Timeline",action:e.jsxs(I,{row:!0,children:[e.jsx(T,{label:"Group Data",control:e.jsx(P,{checked:s,onChange:(c,r)=>a(r)})}),e.jsx(T,{label:"Party",control:e.jsx(P,{checked:o,onChange:(c,r)=>l(r)})})]})})})},ge=t=>{var s,a;return`
<div style="display: flex; border: 1px solid black; background-color: ${v(t)}" class="backgroundPaper">
  <div style="flex: 0.6; white-space:nowrap; padding: 10px; "> 
    <b>${t.name}</b><br> 
    <hr />
    Hours: ${t.hours}<br> 
    Period: ${(s=t.startDate)==null?void 0:s.toLocaleDateString()} - ${((a=t.endDate)==null?void 0:a.toLocaleDateString())??"present"}<br> 
    Days: ${t.numDays??"-"}
  </div>
  ${t.banner?`
      <div style="flex: 1; min-width: 200px">
        <img src="${t.banner}"
        style="max-width: 100%; max-height: 200px;"> 
      </div>
   `:""}
</div>
`},Se=({vgData:t,filterState:s,filterDispatch:a})=>t.length>0?e.jsxs(z,{spacing:2,children:[e.jsx(Jt,{data:t,yearType:s.yearType,yearTo:s.yearTo,measure:s.measure,filterDispatch:a}),e.jsx(je,{data:t}),e.jsx(ie,{data:t,measure:s.measure}),e.jsx(xe,{data:t,measure:s.measure,yearType:s.yearType}),e.jsx(Pt,{MediaComponent:ot,title:"All Games",data:t,width:4,colour:v})]}):e.jsx(C,{variant:"h1",textAlign:"center",children:"No Data Found"});export{Se as default};
//# sourceMappingURL=Graphs-DCznJZ1v.js.map
