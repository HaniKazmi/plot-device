import{c as O,j as e,d as v,C as G,T as f,a as $,u as _,r as g}from"./index-75beca77.js";import{a as U,D as c,c as N,T as H,b as W,d as C,e as z,A as K,U as q,P as w,g as J,f as Q,h as X,C as k,k as Z,F as A,S as Y,B as tt,i as et,j as st}from"./Timeline-a6560763.js";import{G as E,s as at,c as m,r as nt,T as rt,p as ot,i as lt,F as T,S as F}from"./types-4ba4b25b.js";import{a as B,C as ct}from"./index-40675336.js";import{S as R}from"./Stack-ffae2959.js";const ut=O(e.jsx("path",{d:"M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67zM11.71 19c-1.78 0-3.22-1.4-3.22-3.14 0-1.62 1.05-2.76 2.81-3.12 1.77-.36 3.6-1.21 4.62-2.58.39 1.29.59 2.65.59 4.04 0 2.65-2.15 4.8-4.8 4.8z"}),"Whatshot"),V=({item:t,...s})=>e.jsx(U,{alt:t.name,image:t.banner,detailComponent:a=>{var l,n,r;return e.jsx(B,{sx:{background:a,color:o=>a&&o.palette.getContrastText(a)},children:e.jsxs(E,{container:!0,spacing:1,children:[e.jsx(it,{colour:a,item:t}),e.jsx(c,{colour:a,label:"Start Date",value:t.exactDate?t.startDate.toLocaleDateString():(l=t.startDate)==null?void 0:l.getFullYear()}),e.jsx(c,{colour:a,label:"End Date",value:t.exactDate?(n=t.endDate)==null?void 0:n.toLocaleDateString():(r=t.endDate)==null?void 0:r.getFullYear()}),e.jsx(c,{colour:a,label:"Days To Beat",value:t.exactDate?t.numDays:void 0}),e.jsx(c,{colour:a,label:"Hours",value:t.hours}),e.jsx(c,{colour:at(t),label:"Status",value:t.status}),e.jsx(c,{colour:m(t),label:"Platform",value:t.platform}),e.jsx(c,{colour:a,label:"Release Date",value:t.releaseDate.toLocaleDateString()}),e.jsx(c,{colour:a,label:"Format",value:t.format}),e.jsx(c,{colour:a,label:"Developer",value:t.developer}),e.jsx(c,{colour:a,label:"Publisher",value:t.publisher}),e.jsx(c,{colour:a,label:"Franchise",value:t.franchise}),e.jsx(c,{colour:nt(t),label:"PEGI",value:t.rating}),e.jsx(c,{colour:a,label:"Genre",value:t.genre}),e.jsx(c,{large:!0,colour:a,label:"Themes",value:t.theme.join(" - ")})]})})},...s}),P=new Date(2004,0,1),M=v(P,G),it=({colour:t,item:s})=>{if(!s.startDate||s.startDate<P)return null;const a=s.endDate?s.exactDate?s.endDate:new Date(s.startDate.getFullYear(),s.startDate.getMonth()+1,s.startDate.getDay()):G,n=v(P,s.startDate)/M*100,r=Math.max((s.numDays??v(s.startDate,a))/M*100,.5),o=100-r-n;return e.jsx(N,{segments:[e.jsx(H,{percent:n},0),e.jsx(W,{percent:r,backgroundColour:["secondary.dark","secondary.light"],tooltip:e.jsxs(e.Fragment,{children:[s.exactDate?e.jsxs(e.Fragment,{children:[e.jsxs(f,{children:["Played ",s.startDate.toLocaleDateString()," - ",a.toLocaleDateString()]}),e.jsxs(f,{children:[s.numDays," Days"]})]}):e.jsxs(f,{children:["Played in ",s.startDate.getFullYear()]}),e.jsxs(f,{children:[s.hours," Hours"]})]})},1),e.jsx(H,{percent:o},2)],colour:t})},dt=({data:t})=>e.jsxs(E,{container:!0,spacing:1,alignItems:"stretch",children:[e.jsx(ht,{data:t}),e.jsx(jt,{data:t}),e.jsx(pt,{data:t}),e.jsx(xt,{data:t}),e.jsx(yt,{data:t}),e.jsx(gt,{data:t}),e.jsx(Dt,{data:t})]}),ht=({data:t})=>{const s=t.filter(n=>n.hours),a=s.sum("hours"),l=s.length;return e.jsx(C,{icon:e.jsx(rt,{}),title:"All Time",content:[["Games",l],["Hours",a]]})},pt=({data:t})=>{const s=t.reduce((n,r)=>{var u;const o=(u=r.startDate)==null?void 0:u.getFullYear().toString();return!o||!r.hours||(n[o]??(n[o]=[0,0]),n[o]=[n[o][0]+1,n[o][1]+r.hours]),n},{}),a=parseFloat((Object.values(s).sum(0)/Object.keys(s).length).toFixed(2)),l=parseFloat((Object.values(s).sum(1)/Object.keys(s).length).toFixed(2));return e.jsx(C,{icon:e.jsx(z,{}),title:"Yearly Average",content:[["Games",a],["Hours",l]]})},xt=({data:t})=>{const s=t.filter(n=>n.status==="Beat"&&n.hours&&n.numDays),a=Math.round(s.sum("hours")/s.length),l=Math.round(s.sum("numDays")/s.length);return e.jsx(C,{icon:e.jsx(K,{}),title:"Game Average",content:[["Hours",a],["Days To Beat",l]]})},jt=({data:t})=>{const s=t.filter(n=>{var r;return((r=n.startDate)==null?void 0:r.getFullYear())===$&&n.hours}),a=s.sum("hours"),l=s.length;return e.jsx(C,{icon:e.jsx(q,{}),title:`In ${$}`,content:[["Games",l],["Hours",a]]})},Dt=({data:t})=>{const s=t.filter(a=>a.hours&&a.startDate&&a.endDate).sortByKey("endDate").slice(0,6);return e.jsx(L,{icon:e.jsx(w,{}),title:"Recently Finished",content:s,labelComponent:I})},gt=({data:t})=>{const s=t.filter(a=>a.hours&&a.startDate&&a.endDate).sortByKey("hours").slice(0,6);return e.jsx(L,{icon:e.jsx(ut,{}),title:"Most Played",content:s,labelComponent:I})},yt=({data:t})=>{const s=t.filter(a=>a.status==="Playing").sort((a,l)=>a.startDate>l.startDate?1:-1);return s.length==0?null:e.jsx(L,{icon:e.jsx(J,{}),title:"Currently Playing",content:s,labelComponent:bt,width:[12,12,12],pictureWidth:[12,4,4]})},I=t=>{var s;return[[((s=t.endDate)==null?void 0:s.toLocaleDateString())??"",`${Q(t.hours)} Hours`]]},bt=t=>{var s;return[[((s=t.startDate)==null?void 0:s.toLocaleDateString())??""]]},L=t=>e.jsx(X,{aspectRatio:"16/9",divider:!0,chipComponent:ot,landscape:!0,MediaComponent:V,...t}),ft=t=>t.every(s=>typeof s=="string"),mt=({data:t,measure:s})=>{const a=_(),l=[g.useState("company"),g.useState("platform"),g.useState("franchise")],{ids:n,labels:r,parents:o,values:u,colours:d}=g.useMemo(()=>vt(t,l.map(([h])=>h),s),[t,s,...l]);return e.jsxs(ct,{children:[e.jsx(k,{title:"Sunburst",action:e.jsx(Ct,{controlStates:l})}),e.jsx(B,{children:e.jsx(Z,{style:{width:"100%",height:"95vh",maxHeight:"100vw"},data:[{labels:r,parents:o,values:u,ids:n,type:"sunburst",branchvalues:"total",maxdepth:3,sort:!1,marker:{line:{color:a.palette.background.paper},colors:d}}],config:{displayModeBar:!1,responsive:!0},layout:{margin:{l:0,r:0,b:0,t:0},paper_bgcolor:a.palette.mode==="dark"?"rgba(0,0,0,0)":void 0}})})]})},St=["company","format","franchise","name","platform","publisher","genre","rating","status","startDate"],Ct=({controlStates:t})=>e.jsx(A,{children:t.map(([s,a],l)=>e.jsx(Y,{options:St,value:s,setValue:a},"sunburst-control-"+l))}),vt=(t,s,a)=>{const l=(p,x)=>{const j=p[x];return j instanceof Date?j.getFullYear().toString():j},n=t.filter(p=>!(a==="Hours"&&p.hours===void 0)).reduce((p,x)=>{const j=s.map(i=>l(x,i));if(!ft(j))return p;let D=p;return j.forEach(i=>D=D[i]=D[i]||{}),D[x.name]=x,p},{}),r=[],o=[],u=[],d=[],h=[],y=(p,x)=>{let j=0,D="";return Object.entries(p).sort(([i],[b])=>i.localeCompare(b)).forEach(([i,b])=>{let S;lt(b)?(S=a==="Hours"?b.hours:1,s[0]==="company"&&(D=m(b))):[S,D]=y(b,`${x}-${i}`),o.push(i),u.push(x),d.push(S),r.push(`${x}-${i}`),h.push(D),j+=S}),[j,D]};return y(n,""),{labels:o,parents:u,values:d,ids:r,colours:h}},Tt={none:!0,company:!0,format:!0,franchise:!1,name:!1,platform:!0,developer:!1,publisher:!1,rating:!0,status:!0,genre:!0},Ft=({data:t,measure:s})=>{const[a,l]=g.useState("company"),[n,r]=g.useState(!1),[o,u]=g.useState(!0),d=Pt(t,a,s,n);return e.jsx(tt,{grouped:d,cumulative:n,stack:o,children:e.jsx(k,{title:s==="Count"?"Games Played":"Hours Played",action:e.jsxs(A,{children:[e.jsx(Y,{options:Object.keys(Tt),value:a,setValue:l}),e.jsxs(R,{direction:"row",children:[e.jsx(T,{label:"Cumulative",control:e.jsx(F,{checked:n,onChange:(h,y)=>r(y)})}),e.jsx(T,{label:"Stack",control:e.jsx(F,{checked:o,onChange:(h,y)=>u(y),disabled:n})})]})]})})})},Pt=(t,s,a,l)=>t.reduce((n,r)=>{var d,h;const o=s==="none"?"":r[s],u=l?(d=r.startDate)==null?void 0:d.toISOString().substring(0,7):(h=r.startDate)==null?void 0:h.getFullYear().toString();return!u||!r.hours||(n[o]??(n[o]={color:s==="company"?m(r):"",data:{}}),n[o].data[u]=(n[o].data[u]||0)+(a==="Count"?1:r.hours)),n},{}),Gt=({data:t})=>{const[s,a]=g.useState(!1),l=s?({company:r})=>r:()=>"*",n=t.filter(({exactDate:r,startDate:o})=>r&&o.getFullYear()>2014).map(r=>[l(r),r.name,kt(r),r.startDate,r.endDate??G]);return e.jsx(et,{data:n,children:e.jsx(k,{title:"Timeline",action:e.jsx(A,{row:!0,children:e.jsx(T,{label:"Group Data",control:e.jsx(F,{checked:s,onChange:(r,o)=>a(o)})})})})})},kt=t=>{var s,a;return`
    <div style="display: flex; background-color: ${m(t)}" class="backgroundPaper">
      <div>
        <ul style="list-style-type: none;padding-left: 5px">
          <li>
            <span><b>${t.name}</b></span>
          </li>
        </ul>
        <hr />
        <ul style="list-style-type: none;padding-left: 10px">
          <li>
            <span><b>Hours: </b></span>
            <span">${t.hours}</span>
          </li>
          <li>
            <span><b>Period: </b></span>
            <span>${(s=t.startDate)==null?void 0:s.toLocaleDateString()} - ${((a=t.endDate)==null?void 0:a.toLocaleDateString())??"present"} </span>
          </li>
          <li>
            <span><b>Days: </b></span>
            <span>${t.numDays??"-"}</span>
          </li>
        </ul>
      </div>
      ${t.banner?`<img src="${t.banner}" style="height: 150px" /><hr />`:""}
    </div>
  `},Yt=({vgData:t,measure:s})=>t.length>0?e.jsxs(R,{spacing:2,children:[e.jsx(dt,{data:t}),e.jsx(Gt,{data:t}),e.jsx(mt,{data:t,measure:s}),e.jsx(Ft,{data:t,measure:s}),e.jsx(st,{MediaComponent:V,title:"All Games",data:t,width:4,colour:m})]}):e.jsx(f,{variant:"h1",textAlign:"center",children:"No Data Found"});export{Yt as default};
//# sourceMappingURL=Graphs-9fe688bf.js.map
