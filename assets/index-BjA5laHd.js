import{H as Q,I as K,ac as U,ad as A,ae as Y,a3 as J,af as X,r as u,K as Z,j as $,p as R,L as tt,q as k,g as M,ag as N,h as q,s as x,P as et,l as O,O as D}from"./index-C3s0TpeY.js";const rt=Q(),ot=K("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root});function nt(t){return tt({props:t,name:"MuiStack",defaultTheme:rt})}function at(t,e){const r=u.Children.toArray(t).filter(Boolean);return r.reduce((a,n,o)=>(a.push(n),o<r.length-1&&a.push(u.cloneElement(e,{key:`separator-${o}`})),a),[])}const st=t=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[t],it=({ownerState:t,theme:e})=>{let r={display:"flex",flexDirection:"column",...U({theme:e},A({values:t.direction,breakpoints:e.breakpoints.values}),a=>({flexDirection:a}))};if(t.spacing){const a=Y(e),n=Object.keys(e.breakpoints.values).reduce((l,i)=>((typeof t.spacing=="object"&&t.spacing[i]!=null||typeof t.direction=="object"&&t.direction[i]!=null)&&(l[i]=!0),l),{}),o=A({values:t.direction,base:n}),s=A({values:t.spacing,base:n});typeof o=="object"&&Object.keys(o).forEach((l,i,g)=>{if(!o[l]){const h=i>0?o[g[i-1]]:"column";o[l]=h}}),r=J(r,U({theme:e},s,(l,i)=>t.useFlexGap?{gap:N(a,l)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${st(i?o[i]:t.direction)}`]:N(a,l)}}))}return r=X(e.breakpoints,r),r};function lt(t={}){const{createStyledComponent:e=ot,useThemeProps:r=nt,componentName:a="MuiStack"}=t,n=()=>k({root:["root"]},l=>M(a,l),{}),o=e(it);return u.forwardRef(function(l,i){const g=r(l),m=Z(g),{component:h="div",direction:d="column",spacing:p=0,divider:v,children:b,className:f,useFlexGap:C=!1,...y}=m,z={direction:d,spacing:p,useFlexGap:C},E=n();return $.jsx(o,{as:h,ownerState:z,ref:i,className:R(E.root,f),...y,children:v?at(b,v):b})})}function ct(t){return M("MuiCard",t)}q("MuiCard",["root"]);const ut=t=>{const{classes:e}=t;return k({root:["root"]},ct,e)},dt=x(et,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})({overflow:"hidden"}),kt=u.forwardRef(function(e,r){const a=O({props:e,name:"MuiCard"}),{className:n,raised:o=!1,...s}=a,c={...a,raised:o},l=ut(c);return $.jsx(dt,{className:R(l.root,n),elevation:o?8:void 0,ref:r,ownerState:c,...s})});function ht(t){return M("MuiCardContent",t)}q("MuiCardContent",["root"]);const gt=t=>{const{classes:e}=t;return k({root:["root"]},ht,e)},mt=x("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(t,e)=>e.root})({padding:16,"&:last-child":{paddingBottom:24}}),Mt=u.forwardRef(function(e,r){const a=O({props:e,name:"MuiCardContent"}),{className:n,component:o="div",...s}=a,c={...a,component:o},l=gt(c);return $.jsx(mt,{as:o,className:R(l.root,n),ownerState:c,ref:r,...s})}),xt=lt({createStyledComponent:x("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root}),useThemeProps:t=>O({props:t,name:"MuiStack"})});function ft(t){const[e,r]=u.useState(!0),[a,n]=u.useState(null),[o,s]=u.useState(!1),c=()=>{r(!1),s(!0)};return u.useEffect(()=>{if(!document){const m=new Error(`[ScriptLoadingError] document not defined when attempting to load ${t}`);n(m);return}const l=document.querySelector(`script[src="${t}"]`);if(l?.dataset.loaded){c();return}const i=l||document.createElement("script");l||(i.src=t);const g=()=>{i.dataset.loaded="1",c()};i.addEventListener("load",g),i.addEventListener("error",m=>{console.error("Failed to load script:",t,m);const h=new Error(`[ScriptLoadingError] Failed to load script: ${t}`);n(h)}),l||document.head.append(i)},[]),{isLoading:e,error:a,isSuccess:o}}const Ct=t=>t&&t.charts,B=(t,e)=>{const{controls:r,toolbarItems:a,getChartEditor:n}=t;return e&&e.charts&&e.visualization&&e.visualization.ChartWrapper&&e.visualization.Dashboard&&(!r||e.visualization.ChartWrapper)&&(!n||e.visualization.ChartEditor)&&(!a||e.visualization.drawToolbar)},pt=t=>window.google;function vt(t){const{chartVersion:e="current",chartPackages:r=["corechart","controls"],chartLanguage:a="en",mapsApiKey:n}=t,[o,s]=u.useState(null),[c,l]=u.useState(null),[i,g]=u.useState(null),{isLoading:m,error:h,isSuccess:d}=ft(t.chartLoaderScriptUrl||"https://www.gstatic.com/charts/loader.js");return u.useEffect(()=>{if(!d)return;const p=pt();if(!Ct(p)){const v=new Error("[ScriptInitializationError] Script loaded but Google not attached to window.");l(v);return}if(B(t,p)){s(p);return}p.charts.load(e,{packages:r,language:a,mapsApiKey:n}),p.charts.setOnLoadCallback(()=>{if(!B(t,p)){const v=new Error("[GoogleChartsInitializationError] Google Charts not ready after load callback.");console.error(v),g(v);return}s(p)})},[d]),{error:h||c||i,isLoading:m,google:o}}const V={legend_toggle:!1,options:{},legendToggle:!1,getChartWrapper:()=>{},spreadSheetQueryParameters:{headers:1,gid:1},rootProps:{},chartWrapperParams:{},chartLoaderScriptUrl:"https://www.gstatic.com/charts/loader.js"},yt=t=>{const{isReady:e,chartControls:r,filter:a}=t;return!e||!r||!r?.length?null:D.createElement(D.Fragment,null,r.filter(n=>{let{controlProp:o,control:s}=n;return a?a({control:s,controlProp:o}):!0}).map(n=>{let{control:o}=n;return D.createElement("div",{key:o.getContainerId(),id:o.getContainerId()})}))};let G=0;const H=()=>(G+=1,`reactgooglegraph-${G}`);class _{static initializeControls=e=>{for(let r=0;r<e.length;r+=1){const{controlType:a,options:n,controlWrapperParams:o}=e[r].controlProp;o&&"state"in o&&e[r].control.setState(o.state),e[r].control.setOptions(n),e[r].control.setControlType(a)}};static listenToControlEvents=(e,r)=>{const{google:a}=r;return e.flatMap(n=>{const{control:o,controlProp:s}=n,{controlEvents:c=[]}=s;return c.map(l=>{const{callback:i,eventName:g}=l;return a.visualization.events.addListener(o,g,function(){for(var m=arguments.length,h=new Array(m),d=0;d<m;d++)h[d]=arguments[d];i({chartWrapper:null,controlWrapper:o,props:r,google:a,eventArgs:h})})})})};static createControlId=e=>{let r;return typeof e>"u"?r=`googlechart-control-${H()}`:r=e,r};static createChartControls=e=>{const{controls:r,google:a}=e;return r?r.map((n,o)=>{const{controlID:s,controlType:c,options:l,controlWrapperParams:i}=n,g=this.createControlId(s);return{controlProp:n,control:new a.visualization.ControlWrapper({containerId:g,controlType:c,options:l,...i})}}):null};static addControls=e=>{const{chartWrapper:r,chartDashboard:a}=e,n=this.createChartControls(e);return!n||!a||!r?null:(a.bind(n.map(o=>{let{control:s}=o;return s}),r),this.initializeControls(n),n)}}const wt=t=>{const[e,r]=u.useState(null);return[u.useMemo(()=>!e||!t?null:t.map((n,o)=>{const s=e[o];return s?{controlProp:n,control:s}:void 0}).flatMap(n=>n?[n]:[]),[e,t]),r]},Et=(t,e)=>{u.useEffect(()=>{const r=_.listenToControlEvents(t??[],e);return()=>{r.forEach(a=>{e.google.visualization.events.removeListener(a)})}},[t,e])},bt=t=>{const[e,r]=wt(t.controls);return Et(e??[],t),{addControls:n=>{const o=_.addControls(n);r(o?.map(s=>s.control)??null)},renderControl:n=>{const{chartWrapper:o,chartDashboard:s}=t;return u.createElement(yt,{...t,isReady:!!(o&&s),chartControls:e,filter:n})}}},zt=t=>{const e=u.useRef(null);return{chartId:(()=>{const{graphID:n,graph_id:o}=t,s=n||o;let c;return s?c=s:c=e.current||H(),e.current=c,e.current})()}},St=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#3B3EAC"],Tt=async function(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise((a,n)=>{const o=`${r.headers?`headers=${r.headers}`:"headers=0"}`,s=`${r.query?`&tq=${encodeURIComponent(r.query)}`:""}`,c=`${r.gid?`&gid=${r.gid}`:""}`,l=`${r.sheet?`&sheet=${r.sheet}`:""}`,i=`${r.access_token?`&access_token=${r.access_token}`:""}`,g=`${o}${c}${l}${s}${i}`,m=`${e}/gviz/tq?${g}`;new t.visualization.Query(m).send(d=>{d.isError()?n(`Error in query:  ${d.getMessage()} ${d.getDetailedMessage()}`):a(d.getDataTable())})})},Dt="#CCCCCC";class W{static grayOutHiddenColumnsLabel=(e,r)=>{const{googleChartWrapper:a,options:n}=e;if(!a){console.error("googleChartWrapper is not defined");return}const o=a.getDataTable();if(!o)return;const s=o.getNumberOfColumns();if(r.length>0===!1)return;const l=Array.from({length:s-1}).map((i,g)=>{const m=this.getColumnId(o,g+1);return r.includes(m)?Dt:n&&n.colors?n.colors[g]:St[g]});a.setOptions({...n,colors:l}),a.draw()};static listenToLegendToggle=(e,r)=>{const[a,n]=r,{google:o,googleChartWrapper:s}=e;if(!s){console.error("googleChartWrapper is not defined");return}return o.visualization.events.addListener(s,"select",()=>{const l=s.getChart().getSelection(),i=s.getDataTable();if(l.length===0||l[0].row!==null||!i)return;const g=l[0].column,m=this.getColumnId(i,g);a?.includes(m)?n(h=>[...h.filter(d=>d!==m)]):n(h=>[...h,m])})};static draw=async e=>{const{data:r,diffdata:a,rows:n,columns:o,options:s,chartType:c,formatters:l,spreadSheetUrl:i,spreadSheetQueryParameters:g,googleChartDashboard:m,googleChartWrapper:h,google:d,hiddenColumns:p,legendToggle:v,legend_toggle:b}=e;if(!h){console.error("draw was called with googleChartWrapper = null");return}let f,C=null;if(a){const I=d.visualization.arrayToDataTable(a.old),w=d.visualization.arrayToDataTable(a.new);C=d.visualization[c].prototype.computeDiff(I,w)}r?r instanceof d.visualization.DataTable?f=r:Array.isArray(r)?f=d.visualization.arrayToDataTable(r):f=new d.visualization.DataTable(r):n&&o?f=d.visualization.arrayToDataTable([o,...n]):i?f=await Tt(d,i,g):f=d.visualization.arrayToDataTable([]);const y=f.getNumberOfColumns(),z=Array(y).fill(0).map((I,w)=>{const F=this.getColumnId(f,w);return p.includes(F)?{label:f.getColumnLabel(w),type:f.getColumnType(w),calc:()=>null}:w}),E=h.getChart();h.getChartType()==="Timeline"&&E&&E.clearChart(),h.setChartType(c),h.setOptions(s||{});const S=new d.visualization.DataView(f);S.setColumns(z),h.setDataTable(S),h.draw(),m&&m.draw(f),C&&(h.setDataTable(C),h.draw()),l&&(this.applyFormatters({dataTable:f,formatters:l,google:d}),h.setDataTable(f),h.draw()),(v===!0||b===!0)&&this.grayOutHiddenColumnsLabel(e,p)};static getColumnId=(e,r)=>e.getColumnId(r)||e.getColumnLabel(r);static applyFormatters=e=>{let{dataTable:r,formatters:a,google:n}=e;for(let o of a)switch(o.type){case"ArrowFormat":{new n.visualization.ArrowFormat(o.options).format(r,o.column);return}case"BarFormat":{new n.visualization.BarFormat(o.options).format(r,o.column);return}case"ColorFormat":{const s=new n.visualization.ColorFormat(o.options),{ranges:c}=o;if(c)for(let l of c)s.addRange(...l);s.format(r,o.column);return}case"DateFormat":{new n.visualization.DateFormat(o.options).format(r,o.column);return}case"NumberFormat":{new n.visualization.NumberFormat(o.options).format(r,o.column);return}case"PatternFormat":{new n.visualization.PatternFormat(o.options).format(r,o.column);return}default:{console.warn(`Unknown formatter type: ${o.type}`);return}}}}const It=t=>{const{google:e,googleChartWrapper:r,googleChartDashboard:a}=t,[n,o]=u.useState([]);u.useEffect(()=>{r&&W.draw({...t,hiddenColumns:n,googleChartWrapper:r,googleChartDashboard:a,google:e})},[n,t.data,t.rows,t.columns,t.options,t.chartLoaderScriptUrl,t.chartType,t.formatters,t.spreadSheetUrl,t.spreadSheetQueryParameters,t.legendToggle,t.legend_toggle]);const s=()=>{const{googleChartWrapper:i}=t;i&&i.draw()},c=i=>{const g=[],{legendToggle:m,legend_toggle:h}=t;if(W.draw({...t,hiddenColumns:n,googleChartWrapper:i,googleChartDashboard:a,google:e}),window.addEventListener("resize",s),h||m){const d=W.listenToLegendToggle(t,[n,o]);d&&g.push(d)}return g},l=(i,g)=>{window.removeEventListener("resize",s),g.forEach(m=>{e.visualization.events.removeListener(m)}),i.getChartType()==="Timeline"&&i.getChart()&&i.getChart().clearChart()};u.useEffect(()=>{if(!r)return;const i=c(r);return()=>{l(r,i)}},[r,c,l])},Ft=t=>{const{chartEvents:e,google:r,googleChartWrapper:a}=t;if(e){if(!a){console.warn("listenToEvents was called before chart wrapper ready.");return}return e.map(n=>{let{eventName:o,callback:s}=n;return r.visualization.events.addListener(a,o,function(){for(var c=arguments.length,l=new Array(c),i=0;i<c;i++)l[i]=arguments[i];s({chartWrapper:a,props:t,google:r,eventArgs:l})})})}},Lt=t=>{u.useEffect(()=>{if(!t.googleChartWrapper)return;const e=Ft(t);return()=>{e?.forEach(r=>{t.google.visualization.events.removeListener(r)})}},[t])},Pt=t=>{const[e,r]=u.useState(null),[a,n]=u.useState(null),{addControls:o,renderControl:s}=bt({...t,chartDashboard:a,chartWrapper:e});Lt({...t,googleChartWrapper:e});const{chartId:c}=zt(t),l=u.useRef(null),i=u.useRef(null);u.useEffect(()=>{const{options:f,google:C,chartType:y,chartWrapperParams:z,toolbarItems:E,getChartEditor:S,getChartWrapper:I,onLoad:w}=t,F={chartType:y,options:f,containerId:c,...z},T=new C.visualization.ChartWrapper(F);T.setOptions(f||{}),I?.(T,C);const L=new C.visualization.Dashboard(l.current);E&&C.visualization.drawToolbar(i.current,E);let P=null;S&&(P=new C.visualization.ChartEditor,S({chartEditor:P,chartWrapper:T,google:C})),o({...t,chartDashboard:L,chartWrapper:T}),r(T),n(L),w?.(C,{google:C,chartWrapper:T,chartEditor:P,chartDashboard:L})},[]),It({...t,googleChartWrapper:e,googleChartDashboard:a});const g=()=>{const{width:f,height:C,options:y,style:z,className:E,rootProps:S,google:I}=t,w={height:C||y&&y.height,width:f||y&&y.width,...z};return u.createElement("div",{id:c,style:w,className:E,...S})},m=()=>t.toolbarItems?u.createElement("div",{ref:i}):null,{width:h,height:d,options:p,style:v}=t,b={height:d||p&&p.height,width:h||p&&p.width,...v};return t.render?u.createElement("div",{ref:l,style:b},u.createElement("div",{ref:i,id:"toolbar"}),t.render({renderChart:g,renderControl:s,renderToolbar:m})):u.createElement("div",{ref:l,style:b},s(f=>{let{controlProp:C}=f;return C.controlPosition!=="bottom"}),g(),s(f=>{let{controlProp:C}=f;return C.controlPosition==="bottom"}),m())},At=u.createContext(V),Wt=t=>{let{children:e,value:r}=t;return u.createElement(At.Provider,{value:r},e)},$t=t=>{const{google:e,isLoading:r,error:a}=vt(t);return r?t.loader??null:a?t.errorElement??null:e?D.createElement(Pt,{google:e,...t}):null},Ot=t=>{const e={...V,...t};return D.createElement(Wt,{value:e},D.createElement($t,e))};var j;(function(t){t.annotation="annotation",t.annotationText="annotationText",t.certainty="certainty",t.emphasis="emphasis",t.interval="interval",t.scope="scope",t.style="style",t.tooltip="tooltip",t.domain="domain"})(j||(j={}));export{kt as C,xt as S,Mt as a,Ot as b};
//# sourceMappingURL=index-BjA5laHd.js.map
