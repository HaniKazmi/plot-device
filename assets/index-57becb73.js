import{e as S,g as T,s as W,P as q,r as i,f as L,_ as P,b as y,j as A,h as x,i as M}from"./index-d623a0ad.js";function B(a){return S("MuiCard",a)}T("MuiCard",["root"]);const j=["className","raised"],G=a=>{const{classes:s}=a;return M({root:["root"]},B,s)},H=W(q,{name:"MuiCard",slot:"Root",overridesResolver:(a,s)=>s.root})(()=>({overflow:"hidden"})),$=i.forwardRef(function(s,t){const o=L({props:s,name:"MuiCard"}),{className:r,raised:e=!1}=o,n=P(o,j),c=y({},o,{raised:e}),d=G(c);return A.jsx(H,y({className:x(d.root,r),elevation:e?8:void 0,ref:t,ownerState:c},n))}),pt=$;function Q(a){return S("MuiCardContent",a)}T("MuiCardContent",["root"]);const K=["className","component"],V=a=>{const{classes:s}=a;return M({root:["root"]},Q,s)},Y=W("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(a,s)=>s.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),J=i.forwardRef(function(s,t){const o=L({props:s,name:"MuiCardContent"}),{className:r,component:e="div"}=o,n=P(o,K),c=y({},o,{component:e}),d=V(c);return A.jsx(Y,y({as:e,className:x(d.root,r),ownerState:c,ref:t},n))}),gt=J;function X(a,s,t){i.useEffect(()=>{if(!document)return;const o=document.querySelector('script[src="'.concat(a,'"]'));if(o!=null&&o.dataset.loaded){s==null||s();return}const r=o||document.createElement("script");o||(r.src=a);const e=()=>{r.dataset.loaded="1",s==null||s()};return r.addEventListener("load",e),t&&r.addEventListener("error",t),o||document.head.append(r),()=>{r.removeEventListener("load",e),t&&r.removeEventListener("error",t)}},[])}function Z(a){let{chartVersion:s="current",chartPackages:t=["corechart","controls"],chartLanguage:o="en",mapsApiKey:r}=a;const[e,n]=i.useState(null),[c,d]=i.useState(!1);return X("https://www.gstatic.com/charts/loader.js",()=>{const l=window==null?void 0:window.google;l&&(l.charts.load(s,{packages:t,language:o,mapsApiKey:r}),l.charts.setOnLoadCallback(()=>{n(l)}))},()=>{d(!0)}),[e,c]}function tt(a){let{onLoad:s,onError:t,...o}=a;const[r,e]=Z(o);return i.useEffect(()=>{r&&s&&s(r)},[r]),i.useEffect(()=>{e&&t&&t()},[e]),null}const _={legend_toggle:!1,options:{},legendToggle:!1,getChartWrapper:()=>{},spreadSheetQueryParameters:{headers:1,gid:1},rootProps:{},chartWrapperParams:{}};let z=0;const et=()=>(z+=1,"reactgooglegraph-".concat(z)),ot=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#3B3EAC"],rt=async function(a,s){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise((o,r)=>{const e="".concat(t.headers?"headers=".concat(t.headers):"headers=0"),n="".concat(t.query?"&tq=".concat(encodeURIComponent(t.query)):""),c="".concat(t.gid?"&gid=".concat(t.gid):""),d="".concat(t.sheet?"&sheet=".concat(t.sheet):""),l="".concat(t.access_token?"&access_token=".concat(t.access_token):""),h="".concat(e).concat(c).concat(d).concat(n).concat(l),p="".concat(s,"/gviz/tq?").concat(h);new a.visualization.Query(p).send(f=>{f.isError()?r("Error in query:  ".concat(f.getMessage()," ").concat(f.getDetailedMessage())):o(f.getDataTable())})})},{Provider:st,Consumer:nt}=i.createContext(_),at=a=>{let{children:s,value:t}=a;return i.createElement(st,{value:t},s)},R=a=>{let{render:s}=a;return i.createElement(nt,null,t=>s(t))},it="#CCCCCC";class lt extends i.Component{componentDidMount(){this.draw(this.props),window.addEventListener("resize",this.onResize),(this.props.legend_toggle||this.props.legendToggle)&&this.listenToLegendToggle()}componentWillUnmount(){const{google:s,googleChartWrapper:t}=this.props;window.removeEventListener("resize",this.onResize),s.visualization.events.removeAllListeners(t),t.getChartType()==="Timeline"&&t.getChart()&&t.getChart().clearChart()}componentDidUpdate(){this.draw(this.props)}render(){return null}constructor(...s){super(...s),this.state={hiddenColumns:[]},this.listenToLegendToggle=()=>{const{google:t,googleChartWrapper:o}=this.props;t.visualization.events.addListener(o,"select",()=>{const e=o.getChart().getSelection(),n=o.getDataTable();if(e.length===0||e[0].row||!n)return;const c=e[0].column,d=this.getColumnID(n,c);this.state.hiddenColumns.includes(d)?this.setState(l=>({...l,hiddenColumns:[...l.hiddenColumns.filter(h=>h!==d)]})):this.setState(l=>({...l,hiddenColumns:[...l.hiddenColumns,d]}))})},this.applyFormatters=(t,o)=>{const{google:r}=this.props;for(let e of o)switch(e.type){case"ArrowFormat":{new r.visualization.ArrowFormat(e.options).format(t,e.column);break}case"BarFormat":{new r.visualization.BarFormat(e.options).format(t,e.column);break}case"ColorFormat":{const n=new r.visualization.ColorFormat(e.options),{ranges:c}=e;for(let d of c)n.addRange(...d);n.format(t,e.column);break}case"DateFormat":{new r.visualization.DateFormat(e.options).format(t,e.column);break}case"NumberFormat":{new r.visualization.NumberFormat(e.options).format(t,e.column);break}case"PatternFormat":{new r.visualization.PatternFormat(e.options).format(t,e.column);break}}},this.getColumnID=(t,o)=>t.getColumnId(o)||t.getColumnLabel(o),this.draw=async t=>{let{data:o,diffdata:r,rows:e,columns:n,options:c,legend_toggle:d,legendToggle:l,chartType:h,formatters:p,spreadSheetUrl:C,spreadSheetQueryParameters:f}=t;const{google:m,googleChartWrapper:g}=this.props;let u,D=null;if(r){const v=m.visualization.arrayToDataTable(r.old),b=m.visualization.arrayToDataTable(r.new);D=m.visualization[h].prototype.computeDiff(v,b)}o!==null?Array.isArray(o)?u=m.visualization.arrayToDataTable(o):u=new m.visualization.DataTable(o):e&&n?u=m.visualization.arrayToDataTable([n,...e]):C?u=await rt(m,C,f):u=m.visualization.arrayToDataTable([]);const w=u.getNumberOfColumns();for(let v=0;v<w;v+=1){const b=this.getColumnID(u,v);if(this.state.hiddenColumns.includes(b)){const O=u.getColumnLabel(v),N=u.getColumnId(v),k=u.getColumnType(v);u.removeColumn(v),u.addColumn({label:O,id:N,type:k})}}const E=g.getChart();g.getChartType()==="Timeline"&&E&&E.clearChart(),g.setChartType(h),g.setOptions(c||{}),g.setDataTable(u),g.draw(),this.props.googleChartDashboard!==null&&this.props.googleChartDashboard.draw(u),D&&(g.setDataTable(D),g.draw()),p&&(this.applyFormatters(u,p),g.setDataTable(u),g.draw()),(l===!0||d===!0)&&this.grayOutHiddenColumns({options:c})},this.grayOutHiddenColumns=t=>{let{options:o}=t;const{googleChartWrapper:r}=this.props,e=r.getDataTable();if(!e)return;const n=e.getNumberOfColumns();if(this.state.hiddenColumns.length>0===!1)return;const d=Array.from({length:n-1}).map((l,h)=>{const p=this.getColumnID(e,h+1);return this.state.hiddenColumns.includes(p)?it:o&&o.colors?o.colors[h]:ot[h]});r.setOptions({...o,colors:d}),r.draw()},this.onResize=()=>{const{googleChartWrapper:t}=this.props;t.draw()}}}class ct extends i.Component{componentDidMount(){}componentWillUnmount(){}shouldComponentUpdate(){return!1}render(){const{google:s,googleChartWrapper:t,googleChartDashboard:o}=this.props;return i.createElement(R,{render:r=>i.createElement(lt,Object.assign({},r,{google:s,googleChartWrapper:t,googleChartDashboard:o}))})}}class ht extends i.Component{shouldComponentUpdate(){return!1}listenToEvents(s){let{chartEvents:t,google:o,googleChartWrapper:r}=s;if(t){o.visualization.events.removeAllListeners(r);for(let n of t){var e=this;const{eventName:c,callback:d}=n;o.visualization.events.addListener(r,c,function(){for(var l=arguments.length,h=new Array(l),p=0;p<l;p++)h[p]=arguments[p];d({chartWrapper:r,props:e.props,google:o,eventArgs:h})})}}}componentDidMount(){var s;const{google:t,googleChartWrapper:o}=this.props;this.listenToEvents({chartEvents:((s=this.propsFromContext)===null||s===void 0?void 0:s.chartEvents)||null,google:t,googleChartWrapper:o})}render(){return this.props,i.createElement(R,{render:s=>(this.propsFromContext=s,null)})}constructor(s){super(s),this.propsFromContext=null}}let I=0;class dt extends i.Component{componentDidMount(){const{options:s,google:t,chartType:o,chartWrapperParams:r,toolbarItems:e,getChartEditor:n,getChartWrapper:c}=this.props,d={chartType:o,options:s,containerId:this.getGraphID(),...r},l=new t.visualization.ChartWrapper(d);l.setOptions(s||{}),c&&c(l,t);const h=new t.visualization.Dashboard(this.dashboard_ref),p=this.addControls(l,h);e&&t.visualization.drawToolbar(this.toolbar_ref.current,e);let C=null;n&&(C=new t.visualization.ChartEditor,n({chartEditor:C,chartWrapper:l,google:t})),this.setState({googleChartEditor:C,googleChartControls:p,googleChartDashboard:h,googleChartWrapper:l,isReady:!0})}componentDidUpdate(){if(!this.state.googleChartWrapper||!this.state.googleChartDashboard||!this.state.googleChartControls)return;const{controls:s}=this.props;if(s)for(let t=0;t<s.length;t+=1){const{controlType:o,options:r,controlWrapperParams:e}=s[t];e&&"state"in e&&this.state.googleChartControls[t].control.setState(e.state),this.state.googleChartControls[t].control.setOptions(r),this.state.googleChartControls[t].control.setControlType(o)}}shouldComponentUpdate(s,t){return this.state.isReady!==t.isReady||s.controls!==this.props.controls}render(){const{width:s,height:t,options:o,style:r}=this.props,e={height:t||o&&o.height,width:s||o&&o.width,...r};return this.props.render?i.createElement("div",{ref:this.dashboard_ref,style:e},i.createElement("div",{ref:this.toolbar_ref,id:"toolbar"}),this.props.render({renderChart:this.renderChart,renderControl:this.renderControl,renderToolbar:this.renderToolBar})):i.createElement("div",{ref:this.dashboard_ref,style:e},this.renderControl(n=>{let{controlProp:c}=n;return c.controlPosition!=="bottom"}),this.renderChart(),this.renderControl(n=>{let{controlProp:c}=n;return c.controlPosition==="bottom"}),this.renderToolBar())}constructor(...s){var t;super(...s),t=this,this.state={googleChartWrapper:null,googleChartDashboard:null,googleChartControls:null,googleChartEditor:null,isReady:!1},this.graphID=null,this.dashboard_ref=i.createRef(),this.toolbar_ref=i.createRef(),this.getGraphID=()=>{const{graphID:o,graph_id:r}=this.props;let e;return!o&&!r?this.graphID?e=this.graphID:e=et():o&&!r?e=o:r&&!o?e=r:e=o,this.graphID=e,this.graphID},this.getControlID=(o,r)=>{I+=1;let e;return typeof o>"u"?e="googlechart-control-".concat(r,"-").concat(I):e=o,e},this.addControls=(o,r)=>{const{google:e,controls:n}=this.props,c=n?n.map((l,h)=>{const{controlID:p,controlType:C,options:f,controlWrapperParams:m}=l,g=this.getControlID(p,h);return{controlProp:l,control:new e.visualization.ControlWrapper({containerId:g,controlType:C,options:f,...m})}}):null;if(!c)return null;r.bind(c.map(l=>{let{control:h}=l;return h}),o);for(let l of c){const{control:h,controlProp:p}=l,{controlEvents:C=[]}=p;for(let f of C){var d=this;const{callback:m,eventName:g}=f;e.visualization.events.removeListener(h,g,m),e.visualization.events.addListener(h,g,function(){for(var u=arguments.length,D=new Array(u),w=0;w<u;w++)D[w]=arguments[w];m({chartWrapper:o,controlWrapper:h,props:d.props,google:e,eventArgs:D})})}}return c},this.renderChart=()=>{const{width:o,height:r,options:e,style:n,className:c,rootProps:d,google:l}=this.props,h={height:r||e&&e.height,width:o||e&&e.width,...n};return i.createElement("div",Object.assign({id:this.getGraphID(),style:h,className:c},d),this.state.isReady&&this.state.googleChartWrapper!==null?i.createElement(i.Fragment,null,i.createElement(ct,{googleChartWrapper:this.state.googleChartWrapper,google:l,googleChartDashboard:this.state.googleChartDashboard}),i.createElement(ht,{googleChartWrapper:this.state.googleChartWrapper,google:l})):null)},this.renderControl=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r=>!0;return t.state.isReady&&t.state.googleChartControls!==null?i.createElement(i.Fragment,null,t.state.googleChartControls.filter(r=>{let{controlProp:e,control:n}=r;return o({control:n,controlProp:e})}).map(r=>{let{control:e,controlProp:n}=r;return i.createElement("div",{key:e.getContainerId(),id:e.getContainerId()})})):null},this.renderToolBar=()=>this.props.toolbarItems?i.createElement("div",{ref:this.toolbar_ref}):null}}class U extends i.Component{render(){const{chartLanguage:s,chartPackages:t,chartVersion:o,mapsApiKey:r,loader:e,errorElement:n}=this.props;return i.createElement(at,{value:this.props},this.state.loadingStatus==="ready"&&this.state.google!==null?i.createElement(dt,Object.assign({},this.props,{google:this.state.google})):this.state.loadingStatus==="errored"&&n?n:e,i.createElement(tt,{chartLanguage:s,chartPackages:t,chartVersion:o,mapsApiKey:r,onLoad:this.onLoad,onError:this.onError}))}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}isFullyLoaded(s){const{controls:t,toolbarItems:o,getChartEditor:r}=this.props;return s&&s.visualization&&s.visualization.ChartWrapper&&s.visualization.Dashboard&&(!t||s.visualization.ChartWrapper)&&(!r||s.visualization.ChartEditor)&&(!o||s.visualization.drawToolbar)}constructor(...s){super(...s),this._isMounted=!1,this.state={loadingStatus:"loading",google:null},this.onLoad=t=>{if(this.props.onLoad&&this.props.onLoad(t),this.isFullyLoaded(t))this.onSuccess(t);else{const o=setInterval(()=>{const r=window.google;this._isMounted?r&&this.isFullyLoaded(r)&&(clearInterval(o),this.onSuccess(r)):clearInterval(o)},1e3)}},this.onSuccess=t=>{this.setState({loadingStatus:"ready",google:t})},this.onError=()=>{this.setState({loadingStatus:"errored"})}}}U.defaultProps=_;var F;(function(a){a.annotation="annotation",a.annotationText="annotationText",a.certainty="certainty",a.emphasis="emphasis",a.interval="interval",a.scope="scope",a.style="style",a.tooltip="tooltip",a.domain="domain"})(F||(F={}));var mt=U;export{pt as C,gt as a,mt as b};
//# sourceMappingURL=index-57becb73.js.map
