import{r as g,_ as q,b as v,c as T,j as e,s as R,g as it,e as ut,f as dt,h as I,i as pt,u as ht,k as xt,l as gt,d as z,C as E,T as b,a as k,E as X,B as jt,m as mt}from"./index-e756fac1.js";import{a as ft,D as j,c as yt,T as Y,b as Ct,d as P,U as bt,e as vt,A as Dt,P as St,g as kt,f as Tt,h as Rt,C as F,k as Pt,F as L,S as Z,B as Ft,i as $t,j as Bt}from"./Timeline-231e4f6e.js";import{a as It,c as zt,G as w,s as J,b as S,r as Mt,d as Q,M as tt,T as At,p as Gt,i as Et,F as M,S as A}from"./types-1e77eaee.js";import{a as H,C as et}from"./index-b30eb38c.js";import{S as D}from"./Stack-0663fa1d.js";import{F as st}from"./FormControl-32e2a18e.js";const Lt=["ownerState"];function at(t){return g.forwardRef(function(a,n){const r=q(a,Lt);return g.createElement(t,v({},r,{ref:n}))})}const wt=T(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),Ht=T(e.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),Vt=R("span")({position:"relative",display:"flex"}),Yt=R(wt)({transform:"scale(1)"}),_t=R(Ht)(({theme:t,ownerState:s})=>v({left:0,position:"absolute",transform:"scale(0)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.shortest})},s.checked&&{transform:"scale(1)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.shortest})}));function ot(t){const{checked:s=!1,classes:a={},fontSize:n}=t,r=v({},t,{checked:s});return e.jsxs(Vt,{className:a.root,ownerState:r,children:[e.jsx(Yt,{fontSize:n,className:a.background,ownerState:r}),e.jsx(_t,{fontSize:n,className:a.dot,ownerState:r})]})}const Ot=g.createContext(void 0),Ut=Ot;function Nt(){return g.useContext(Ut)}function Wt(t){return ut("MuiRadio",t)}const Kt=it("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),_=Kt,qt=["checked","checkedIcon","color","icon","name","onChange","size","className"],Xt=t=>{const{classes:s,color:a,size:n}=t,r={root:["root",`color${I(a)}`,n!=="medium"&&`size${I(n)}`]};return v({},s,gt(r,Wt,s))},Zt=R(It,{shouldForwardProp:t=>dt(t)||t==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,s[`color${I(a.color)}`]]}})(({theme:t,ownerState:s})=>v({color:(t.vars||t).palette.text.secondary},!s.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${s.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette[s.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:pt(s.color==="default"?t.palette.action.active:t.palette[s.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},s.color!=="default"&&{[`&.${_.checked}`]:{color:(t.vars||t).palette[s.color].main}},{[`&.${_.disabled}`]:{color:(t.vars||t).palette.action.disabled}}));function Jt(t,s){return typeof s=="object"&&s!==null?t===s:String(t)===String(s)}const O=e.jsx(ot,{checked:!0}),U=e.jsx(ot,{}),Qt=g.forwardRef(function(s,a){var n,r;const o=ht({props:s,name:"MuiRadio"}),{checked:c,checkedIcon:i=O,color:l="primary",icon:d=U,name:u,onChange:p,size:h="medium",className:x}=o,f=q(o,qt),m=v({},o,{color:l,size:h}),C=Xt(m),y=Nt();let $=c;const ct=zt(p,y&&y.onChange);let B=u;return y&&(typeof $>"u"&&($=Jt(y.value,o.value)),typeof B>"u"&&(B=y.name)),e.jsx(Zt,v({type:"radio",icon:g.cloneElement(d,{fontSize:(n=U.props.fontSize)!=null?n:h}),checkedIcon:g.cloneElement(i,{fontSize:(r=O.props.fontSize)!=null?r:h}),ownerState:m,classes:C,name:B,checked:$,onChange:ct,ref:a,className:xt(C.root,x)},f))}),nt=Qt,te=T(e.jsx("path",{d:"M22 5.18 10.59 16.6l-4.24-4.24 1.41-1.41 2.83 2.83 10-10L22 5.18zm-2.21 5.04c.13.57.21 1.17.21 1.78 0 4.42-3.58 8-8 8s-8-3.58-8-8 3.58-8 8-8c1.58 0 3.04.46 4.28 1.25l1.44-1.44C16.1 2.67 14.13 2 12 2 6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10c0-1.19-.22-2.33-.6-3.39l-1.61 1.61z"}),"TaskAlt"),ee=T(e.jsx("path",{d:"M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-10 7H8v3H6v-3H3v-2h3V8h2v3h3v2zm4.5 2c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4-3c-.83 0-1.5-.67-1.5-1.5S18.67 9 19.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}),"VideogameAsset"),se=T(e.jsx("path",{d:"M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67zM11.71 19c-1.78 0-3.22-1.4-3.22-3.14 0-1.62 1.05-2.76 2.81-3.12 1.77-.36 3.6-1.21 4.62-2.58.39 1.29.59 2.65.59 4.04 0 2.65-2.15 4.8-4.8 4.8z"}),"Whatshot"),rt=({item:t,...s})=>e.jsx(ft,{alt:t.name,image:t.banner,detailComponent:a=>{var n,r,o;return e.jsx(H,{sx:{background:a,color:c=>a&&c.palette.getContrastText(a)},children:e.jsxs(w,{container:!0,spacing:1,children:[e.jsx(ae,{colour:a,item:t}),e.jsx(j,{colour:a,label:"Start Date",value:t.exactDate?t.startDate.toLocaleDateString():(n=t.startDate)==null?void 0:n.getFullYear()}),e.jsx(j,{colour:a,label:"End Date",value:t.exactDate?(r=t.endDate)==null?void 0:r.toLocaleDateString():(o=t.endDate)==null?void 0:o.getFullYear()}),e.jsx(j,{colour:a,label:"Days To Beat",value:t.exactDate?t.numDays:void 0}),e.jsx(j,{colour:a,label:"Hours",value:t.hours}),e.jsx(j,{colour:J(t),label:"Status",value:t.status}),e.jsx(j,{colour:S(t),label:"Platform",value:t.platform}),e.jsx(j,{colour:a,label:"Release Date",value:t.releaseDate.toLocaleDateString()}),e.jsx(j,{colour:a,label:"Format",value:t.format}),e.jsx(j,{colour:a,label:"Developer",value:t.developer}),e.jsx(j,{colour:a,label:"Publisher",value:t.publisher}),e.jsx(j,{colour:a,label:"Franchise",value:t.franchise}),e.jsx(j,{colour:Mt(t),label:"PEGI",value:t.rating}),e.jsx(j,{colour:a,label:"Genre",value:t.genre}),e.jsx(j,{large:!0,colour:a,label:"Themes",value:t.theme.join(" - ")})]})})},...s}),G=new Date(2004,0,1),N=z(G,E),ae=({colour:t,item:s})=>{if(!s.startDate||s.startDate<G)return null;const a=s.endDate?s.exactDate?s.endDate:new Date(s.startDate.getFullYear(),s.startDate.getMonth()+1,s.startDate.getDay()):E,r=z(G,s.startDate)/N*100,o=Math.max((s.numDays??z(s.startDate,a))/N*100,.5),c=100-o-r;return e.jsx(yt,{segments:[e.jsx(Y,{percent:r},0),e.jsx(Ct,{percent:o,backgroundColour:["secondary.dark","secondary.light"],tooltip:e.jsxs(e.Fragment,{children:[s.exactDate?e.jsxs(e.Fragment,{children:[e.jsxs(b,{children:["Played ",s.startDate.toLocaleDateString()," - ",a.toLocaleDateString()]}),e.jsxs(b,{children:[s.numDays," Days"]})]}):e.jsxs(b,{children:["Played in ",s.startDate.getFullYear()]}),e.jsxs(b,{children:[s.hours," Hours"]})]})},1),e.jsx(Y,{percent:c},2)],colour:t})},oe=({data:t,measure:s,yearType:a,yearTo:n,filterDispatch:r})=>e.jsxs(w,{container:!0,spacing:1,alignItems:"stretch",children:[e.jsx(re,{data:t,yearTo:n,yearType:a,filterDispatch:r}),e.jsx(le,{data:t,yearTo:n,yearType:a,filterDispatch:r}),e.jsx(ce,{data:t,yearType:a}),e.jsx(ie,{data:t}),e.jsx(ne,{data:t,measure:s}),e.jsx(pe,{data:t}),e.jsx(de,{data:t}),e.jsx(ue,{data:t})]}),W=({percent:t,backgroundColour:s,spacing:a=2})=>e.jsx(jt,{sx:{width:`${t}%`,height:n=>n.spacing(a),backgroundColor:s}}),K=({title:t,data:s,measure:a,groupKey:n,group:r,groupToColour:o,icon:c})=>{const i=a==="Count"?s.length:s.sum("hours");let l=100;const d=r.map(u=>{const p=a==="Count"?s.filter(x=>x[n]===u).length:s.filter(x=>x[n]===u).sum("hours"),h=Math.max(p/i*100,.5);return l-=h,{name:u,count:p,percent:h,colour:o(u)}}).filter(u=>u.count>0);return d[0].percent+=l,e.jsxs(et,{sx:{height:"100%"},children:[e.jsx(F,{titleTypographyProps:{variant:"h6"},title:t,avatar:c}),e.jsxs(H,{sx:{":last-child":{paddingBottom:1},height:"100%"},children:[e.jsx(D,{direction:"row",alignItems:"center",height:u=>u.spacing(3),spacing:.5,children:d.map(u=>e.jsx(W,{percent:u.percent,backgroundColour:u.colour},u.name))}),e.jsx(D,{direction:"row",spacing:1,alignItems:"center",children:d.map(u=>e.jsxs(D,{direction:"column",width:"100%",children:[e.jsx(W,{percent:100,backgroundColour:u.colour,spacing:1}),e.jsx(b,{variant:"h6",children:u.name}),e.jsx(b,{variant:"body1",children:`${u.count} ${a==="Count"?"Games":"Hours"}`})]},u.name))})]})]})},ne=({data:t,measure:s})=>{const a=["Beat","Playing","Endless","Abandoned"],n=["Nintendo","PlayStation","PC","iOS","Xbox"];return e.jsx(w,{xs:12,sm:12,md:8,children:e.jsxs(D,{justifyContent:"space-between",height:"100%",spacing:1,children:[e.jsx(K,{title:"Status",icon:e.jsx(te,{}),data:t,measure:s,groupKey:"status",group:a,groupToColour:r=>J({status:r})}),e.jsx(K,{title:"Platforms",icon:e.jsx(ee,{}),data:t,measure:s,groupKey:"company",group:n,groupToColour:r=>S({company:r})})]})})},re=({data:t,yearType:s,yearTo:a,filterDispatch:n})=>{const r=t.filter(l=>l.hours),o=r.sum("hours"),c=r.length,i=e.jsx(st,{variant:"standard",sx:{minWidth:130,margin:0},children:e.jsx(Q,{SelectDisplayProps:{style:{padding:0}},value:a,displayEmpty:!0,onChange:l=>n({type:"updateFilter",filter:"yearTo",value:l.target.value}),renderValue:l=>e.jsx(b,{variant:"h6",children:l==k?"All Time":`Up To ${l}`}),slots:{root:at("span")},children:Array.from({length:k-X+1},(l,d)=>k-d).map(l=>e.jsx(tt,{value:l,children:l},l))})});return e.jsx(P,{icon:e.jsx(At,{}),title:i,action:e.jsx(nt,{size:"small",checked:s=="date",onChange:()=>n({type:"toggleYearType"})}),content:[["Games",c],["Hours",o]]})},le=({data:t,yearTo:s,yearType:a,filterDispatch:n})=>{const r=t.filter(l=>l.startDate.getFullYear()===s&&l.hours),o=r.sum("hours"),c=r.length,i=e.jsx(st,{variant:"standard",sx:{minWidth:120,margin:0},children:e.jsx(Q,{SelectDisplayProps:{style:{padding:0}},value:s,displayEmpty:!0,onChange:l=>n({type:"updateFilter",filter:"yearTo",value:l.target.value}),renderValue:l=>e.jsxs(b,{variant:"h6",children:["In ",l]}),slots:{root:at("span")},children:Array.from({length:k-X+1},(l,d)=>k-d).map(l=>e.jsx(tt,{value:l,children:l},l))})});return e.jsx(P,{icon:e.jsx(bt,{}),title:i,action:e.jsx(nt,{size:"small",checked:a=="exact",onChange:()=>n({type:"toggleYearType"})}),content:[["Games",c],["Hours",o]]})},ce=({data:t,yearType:s})=>{if(s=="exact")return;const a=t.reduce((o,c)=>{var l;const i=(l=c.startDate)==null?void 0:l.getFullYear().toString();return!i||!c.hours||(o[i]??(o[i]=[0,0]),o[i]=[o[i][0]+1,o[i][1]+c.hours]),o},{}),n=parseFloat((Object.values(a).sum(0)/Object.keys(a).length).toFixed(2)),r=parseFloat((Object.values(a).sum(1)/Object.keys(a).length).toFixed(2));return e.jsx(P,{icon:e.jsx(vt,{}),title:"Yearly Average",content:[["Games",n],["Hours",r]]})},ie=({data:t})=>{const s=t.filter(r=>r.status==="Beat"&&r.hours&&r.numDays),a=Math.round(s.sum("hours")/s.length),n=Math.round(s.sum("numDays")/s.length);return e.jsx(P,{icon:e.jsx(Dt,{}),title:"Game Average",content:[["Hours",a],["Days To Beat",n]]})},ue=({data:t})=>{const s=t.filter(a=>a.hours&&a.startDate&&a.endDate).sortByKey("endDate").slice(0,6);return e.jsx(V,{icon:e.jsx(St,{}),title:"Recently Finished",content:s,labelComponent:lt})},de=({data:t})=>{const s=t.filter(a=>a.hours&&a.startDate&&a.endDate).sortByKey("hours").slice(0,6);return e.jsx(V,{icon:e.jsx(se,{}),title:"Most Played",content:s,labelComponent:lt})},pe=({data:t})=>{const s=t.filter(a=>a.status==="Playing").sortByKey("startDate").reverse();return s.length==0?null:e.jsx(V,{icon:e.jsx(kt,{}),title:"Currently Playing",content:s,labelComponent:he,width:[12,12,4],pictureWidth:[12,4,12],wrap:!1})},lt=t=>{var s;return[[((s=t.endDate)==null?void 0:s.toLocaleDateString())??"",`${Tt(t.hours)} Hours`]]},he=t=>{var s;return[[((s=t.startDate)==null?void 0:s.toLocaleDateString())??""]]},V=t=>e.jsx(Rt,{aspectRatio:"16/9",divider:!0,chipComponent:Gt,landscape:!0,MediaComponent:rt,...t}),xe=t=>t.every(s=>typeof s=="string"),ge=({data:t,measure:s})=>{const a=mt(),n=[g.useState("company"),g.useState("platform"),g.useState("franchise")],{ids:r,labels:o,parents:c,values:i,colours:l}=g.useMemo(()=>fe(t,n.map(([d])=>d),s),[t,s,...n]);return e.jsxs(et,{children:[e.jsx(F,{title:"Sunburst",action:e.jsx(me,{controlStates:n})}),e.jsx(H,{children:e.jsx(Pt,{style:{width:"100%",height:"95vh",maxHeight:"100vw"},data:[{labels:o,parents:c,values:i,ids:r,type:"sunburst",branchvalues:"total",maxdepth:3,sort:!1,marker:{line:{color:a.palette.background.paper},colors:l}}],config:{displayModeBar:!1,responsive:!0},layout:{margin:{l:0,r:0,b:0,t:0},paper_bgcolor:a.palette.mode==="dark"?"rgba(0,0,0,0)":void 0}})})]})},je=["company","format","franchise","name","platform","publisher","genre","rating","status","startDate"],me=({controlStates:t})=>e.jsx(L,{children:t.map(([s,a],n)=>e.jsx(Z,{options:je,value:s,setValue:a},"sunburst-control-"+n))}),fe=(t,s,a)=>{const n=(p,h)=>{const x=p[h];return x instanceof Date?x.getFullYear().toString():x},r=t.filter(p=>!(a==="Hours"&&p.hours===void 0)).reduce((p,h)=>{const x=s.map(m=>n(h,m));if(!xe(x))return p;let f=p;return x.forEach(m=>f=f[m]=f[m]||{}),f[h.name]=h,p},{}),o=[],c=[],i=[],l=[],d=[],u=(p,h)=>{let x=0,f="";return Object.entries(p).sort(([m],[C])=>m.localeCompare(C)).forEach(([m,C])=>{let y;Et(C)?(y=a==="Hours"?C.hours:1,s[0]==="company"&&(f=S(C))):[y,f]=u(C,`${h}-${m}`),c.push(m),i.push(h),l.push(y),o.push(`${h}-${m}`),d.push(f),x+=y}),[x,f]};return u(r,""),{labels:c,parents:i,values:l,ids:o,colours:d}},ye={none:!0,company:!0,format:!0,franchise:!1,name:!1,platform:!0,developer:!1,publisher:!1,rating:!0,status:!0,genre:!0},Ce=({data:t,measure:s,yearType:a})=>{const[n,r]=g.useState("company"),[o,c]=g.useState(!1),[i,l]=g.useState(!0),d=be(t,n,s,o,a);return e.jsx(Ft,{grouped:d,cumulative:o,stack:i,children:e.jsx(F,{title:s==="Count"?"Games Played":"Hours Played",action:e.jsxs(L,{children:[e.jsx(Z,{options:Object.keys(ye),value:n,setValue:r}),e.jsxs(D,{direction:"row",children:[e.jsx(M,{label:"Cumulative",control:e.jsx(A,{checked:o,onChange:(u,p)=>c(p)})}),e.jsx(M,{label:"Stack",control:e.jsx(A,{checked:i,onChange:(u,p)=>l(p),disabled:o})})]})]})})})},be=(t,s,a,n,r)=>t.reduce((o,c)=>{var d,u;const i=s==="none"?"":c[s],l=n||r=="exact"?(d=c.startDate)==null?void 0:d.toISOString().substring(0,7):(u=c.startDate)==null?void 0:u.getFullYear().toString();return!l||!c.hours||(o[i]??(o[i]={color:s==="company"?S(c):"",data:{}}),o[i].data[l]=(o[i].data[l]||0)+(a==="Count"?1:c.hours)),o},{}),ve=({data:t})=>{const[s,a]=g.useState(!1),n=s?({company:o})=>o:()=>"*",r=t.filter(({exactDate:o,startDate:c})=>o&&c.getFullYear()>2014).map(o=>[n(o),o.name,De(o),o.startDate,o.endDate??E]);return e.jsx($t,{data:r,showRowLabels:s,children:e.jsx(F,{title:"Timeline",action:e.jsx(L,{row:!0,children:e.jsx(M,{label:"Group Data",control:e.jsx(A,{checked:s,onChange:(o,c)=>a(c)})})})})})},De=t=>{var s,a;return`
<div style="display: flex; border: 1px solid black; background-color: ${S(t)}" class="backgroundPaper">
  <div style="flex: 0.6; white-space:nowrap; padding: 10px; "> 
    <b>${t.name}</b><br> 
    <hr />
    Hours: ${t.hours}<br> 
    Period: ${(s=t.startDate)==null?void 0:s.toLocaleDateString()} - ${((a=t.endDate)==null?void 0:a.toLocaleDateString())??"present"}<br> 
    Days: ${t.numDays??"-"}
  </div>
  ${t.banner?`
      <div style="flex: 1; min-width: 200px">
        <img src="${t.banner}"
        style="max-width: 100%; max-height: 200px;"> 
      </div>
   `:""}
</div>
`},$e=({vgData:t,filterState:s,filterDispatch:a})=>t.length>0?e.jsxs(D,{spacing:2,children:[e.jsx(oe,{data:t,yearType:s.yearType,yearTo:s.yearTo,measure:s.measure,filterDispatch:a}),e.jsx(ve,{data:t}),e.jsx(ge,{data:t,measure:s.measure}),e.jsx(Ce,{data:t,measure:s.measure,yearType:s.yearType}),e.jsx(Bt,{MediaComponent:rt,title:"All Games",data:t,width:4,colour:S})]}):e.jsx(b,{variant:"h1",textAlign:"center",children:"No Data Found"});export{$e as default};
//# sourceMappingURL=Graphs-4050425d.js.map
