import{r as m,_ as W,b as N,c as G,j as t,d as P,C as H,T as D,a as C,B as U,u as X}from"./index-d623a0ad.js";import{a as q,D as h,c as J,T as Y,b as Q,d as T,e as Z,A as tt,U as et,P as st,g as at,f as nt,h as rt,C as F,k as ot,F as M,S as I,B as lt,i as ct,j as it}from"./Timeline-b0986750.js";import{G as $,s as _,c as S,r as ut,a as dt,M as ht,T as pt,p as xt,i as jt,F as k,S as A}from"./types-d52c3d01.js";import{a as B,C as z}from"./index-57becb73.js";import{S as f}from"./Stack-b937cb5f.js";import{F as gt}from"./FormControl-60460893.js";const mt=["ownerState"];function yt(e){return m.forwardRef(function(a,o){const n=W(a,mt);return m.createElement(e,N({},n,{ref:o}))})}const Dt=G(t.jsx("path",{d:"M22 5.18 10.59 16.6l-4.24-4.24 1.41-1.41 2.83 2.83 10-10L22 5.18zm-2.21 5.04c.13.57.21 1.17.21 1.78 0 4.42-3.58 8-8 8s-8-3.58-8-8 3.58-8 8-8c1.58 0 3.04.46 4.28 1.25l1.44-1.44C16.1 2.67 14.13 2 12 2 6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10c0-1.19-.22-2.33-.6-3.39l-1.61 1.61z"}),"TaskAlt"),bt=G(t.jsx("path",{d:"M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-10 7H8v3H6v-3H3v-2h3V8h2v3h3v2zm4.5 2c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4-3c-.83 0-1.5-.67-1.5-1.5S18.67 9 19.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}),"VideogameAsset"),ft=G(t.jsx("path",{d:"M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67zM11.71 19c-1.78 0-3.22-1.4-3.22-3.14 0-1.62 1.05-2.76 2.81-3.12 1.77-.36 3.6-1.21 4.62-2.58.39 1.29.59 2.65.59 4.04 0 2.65-2.15 4.8-4.8 4.8z"}),"Whatshot"),O=({item:e,...s})=>t.jsx(q,{alt:e.name,image:e.banner,detailComponent:a=>{var o,n,r;return t.jsx(B,{sx:{background:a,color:l=>a&&l.palette.getContrastText(a)},children:t.jsxs($,{container:!0,spacing:1,children:[t.jsx(St,{colour:a,item:e}),t.jsx(h,{colour:a,label:"Start Date",value:e.exactDate?e.startDate.toLocaleDateString():(o=e.startDate)==null?void 0:o.getFullYear()}),t.jsx(h,{colour:a,label:"End Date",value:e.exactDate?(n=e.endDate)==null?void 0:n.toLocaleDateString():(r=e.endDate)==null?void 0:r.getFullYear()}),t.jsx(h,{colour:a,label:"Days To Beat",value:e.exactDate?e.numDays:void 0}),t.jsx(h,{colour:a,label:"Hours",value:e.hours}),t.jsx(h,{colour:_(e),label:"Status",value:e.status}),t.jsx(h,{colour:S(e),label:"Platform",value:e.platform}),t.jsx(h,{colour:a,label:"Release Date",value:e.releaseDate.toLocaleDateString()}),t.jsx(h,{colour:a,label:"Format",value:e.format}),t.jsx(h,{colour:a,label:"Developer",value:e.developer}),t.jsx(h,{colour:a,label:"Publisher",value:e.publisher}),t.jsx(h,{colour:a,label:"Franchise",value:e.franchise}),t.jsx(h,{colour:ut(e),label:"PEGI",value:e.rating}),t.jsx(h,{colour:a,label:"Genre",value:e.genre}),t.jsx(h,{large:!0,colour:a,label:"Themes",value:e.theme.join(" - ")})]})})},...s}),L=new Date(2004,0,1),V=P(L,H),St=({colour:e,item:s})=>{if(!s.startDate||s.startDate<L)return null;const a=s.endDate?s.exactDate?s.endDate:new Date(s.startDate.getFullYear(),s.startDate.getMonth()+1,s.startDate.getDay()):H,n=P(L,s.startDate)/V*100,r=Math.max((s.numDays??P(s.startDate,a))/V*100,.5),l=100-r-n;return t.jsx(J,{segments:[t.jsx(Y,{percent:n},0),t.jsx(Q,{percent:r,backgroundColour:["secondary.dark","secondary.light"],tooltip:t.jsxs(t.Fragment,{children:[s.exactDate?t.jsxs(t.Fragment,{children:[t.jsxs(D,{children:["Played ",s.startDate.toLocaleDateString()," - ",a.toLocaleDateString()]}),t.jsxs(D,{children:[s.numDays," Days"]})]}):t.jsxs(D,{children:["Played in ",s.startDate.getFullYear()]}),t.jsxs(D,{children:[s.hours," Hours"]})]})},1),t.jsx(Y,{percent:l},2)],colour:e})},Ct=({data:e,measure:s,yearTo:a,filterDispatch:o})=>t.jsxs($,{container:!0,spacing:1,alignItems:"stretch",children:[t.jsx(Tt,{data:e,yearTo:a,filterDispatch:o}),t.jsx(kt,{data:e}),t.jsx(Ft,{data:e}),t.jsx(Pt,{data:e}),t.jsx(vt,{data:e,measure:s}),t.jsx(Gt,{data:e}),t.jsx(Lt,{data:e}),t.jsx(At,{data:e})]}),w=({percent:e,backgroundColour:s,spacing:a=2})=>t.jsx(U,{sx:{width:`${e}%`,height:o=>o.spacing(a),backgroundColor:s}}),R=({title:e,data:s,measure:a,groupKey:o,group:n,groupToColour:r,icon:l})=>{const u=a==="Count"?s.length:s.sum("hours");let c=100;const d=n.map(i=>{const x=a==="Count"?s.filter(p=>p[o]===i).length:s.filter(p=>p[o]===i).sum("hours"),j=Math.max(x/u*100,.5);return c-=j,{name:i,count:x,percent:j,colour:r(i)}}).filter(i=>i.count>0);return d[0].percent+=c,t.jsxs(z,{sx:{height:"100%"},children:[t.jsx(F,{titleTypographyProps:{variant:"h6"},title:e,avatar:l}),t.jsxs(B,{sx:{":last-child":{paddingBottom:1},height:"100%"},children:[t.jsx(f,{direction:"row",alignItems:"center",height:i=>i.spacing(3),spacing:.5,children:d.map(i=>t.jsx(w,{percent:i.percent,backgroundColour:i.colour},i.name))}),t.jsx(f,{direction:"row",spacing:1,alignItems:"center",children:d.map(i=>t.jsxs(f,{direction:"column",width:"100%",children:[t.jsx(w,{percent:100,backgroundColour:i.colour,spacing:1}),t.jsx(D,{variant:"h6",children:i.name}),t.jsx(D,{variant:"body1",children:`${i.count} ${a==="Count"?"Games":"Hours"}`})]},i.name))})]})]})},vt=({data:e,measure:s})=>{const a=["Beat","Playing","Endless","Abandoned"],o=["Nintendo","PlayStation","PC","iOS","Xbox"];return t.jsx($,{xs:12,sm:12,md:8,children:t.jsxs(f,{justifyContent:"space-between",height:"100%",spacing:1,children:[t.jsx(R,{title:"Status",icon:t.jsx(Dt,{}),data:e,measure:s,groupKey:"status",group:a,groupToColour:n=>_({status:n})}),t.jsx(R,{title:"Platforms",icon:t.jsx(bt,{}),data:e,measure:s,groupKey:"company",group:o,groupToColour:n=>S({company:n})})]})})},Tt=({data:e,yearTo:s,filterDispatch:a})=>{const o=e.filter(c=>c.hours),n=o.sum("hours"),r=o.length,l=e.sortByKey("startDate").at(-1).startDate.getFullYear(),u=t.jsx(gt,{variant:"standard",sx:{minWidth:120,margin:0},children:t.jsx(dt,{SelectDisplayProps:{style:{padding:0}},value:s,label:"Age",displayEmpty:!0,onChange:c=>a({type:"updateFilter",filter:"yearTo",value:c.target.value}),renderValue:c=>t.jsx(D,{variant:"h6",children:c==C?"All Time":c}),slots:{root:yt("span")},children:Array.from({length:C-l+1},(c,d)=>C-d).map(c=>t.jsx(ht,{value:c,children:c},c))})});return t.jsx(T,{icon:t.jsx(pt,{}),title:u,content:[["Games",r],["Hours",n]]})},Ft=({data:e})=>{const s=e.reduce((n,r)=>{var u;const l=(u=r.startDate)==null?void 0:u.getFullYear().toString();return!l||!r.hours||(n[l]??(n[l]=[0,0]),n[l]=[n[l][0]+1,n[l][1]+r.hours]),n},{}),a=parseFloat((Object.values(s).sum(0)/Object.keys(s).length).toFixed(2)),o=parseFloat((Object.values(s).sum(1)/Object.keys(s).length).toFixed(2));return t.jsx(T,{icon:t.jsx(Z,{}),title:"Yearly Average",content:[["Games",a],["Hours",o]]})},Pt=({data:e})=>{const s=e.filter(n=>n.status==="Beat"&&n.hours&&n.numDays),a=Math.round(s.sum("hours")/s.length),o=Math.round(s.sum("numDays")/s.length);return t.jsx(T,{icon:t.jsx(tt,{}),title:"Game Average",content:[["Hours",a],["Days To Beat",o]]})},kt=({data:e})=>{const s=e.filter(n=>{var r;return((r=n.startDate)==null?void 0:r.getFullYear())===C&&n.hours}),a=s.sum("hours"),o=s.length;return t.jsx(T,{icon:t.jsx(et,{}),title:`In ${C}`,content:[["Games",o],["Hours",a]]})},At=({data:e})=>{const s=e.filter(a=>a.hours&&a.startDate&&a.endDate).sortByKey("endDate").slice(0,6);return t.jsx(E,{icon:t.jsx(st,{}),title:"Recently Finished",content:s,labelComponent:K})},Lt=({data:e})=>{const s=e.filter(a=>a.hours&&a.startDate&&a.endDate).sortByKey("hours").slice(0,6);return t.jsx(E,{icon:t.jsx(ft,{}),title:"Most Played",content:s,labelComponent:K})},Gt=({data:e})=>{const s=e.filter(a=>a.status==="Playing").sortByKey("startDate");return s.length==0?null:t.jsx(E,{icon:t.jsx(at,{}),title:"Currently Playing",content:s,labelComponent:Ht,width:[12,12,4],pictureWidth:[12,4,12]})},K=e=>{var s;return[[((s=e.endDate)==null?void 0:s.toLocaleDateString())??"",`${nt(e.hours)} Hours`]]},Ht=e=>{var s;return[[((s=e.startDate)==null?void 0:s.toLocaleDateString())??""]]},E=e=>t.jsx(rt,{aspectRatio:"16/9",divider:!0,chipComponent:xt,landscape:!0,MediaComponent:O,...e}),Mt=e=>e.every(s=>typeof s=="string"),$t=({data:e,measure:s})=>{const a=X(),o=[m.useState("company"),m.useState("platform"),m.useState("franchise")],{ids:n,labels:r,parents:l,values:u,colours:c}=m.useMemo(()=>Yt(e,o.map(([d])=>d),s),[e,s,...o]);return t.jsxs(z,{children:[t.jsx(F,{title:"Sunburst",action:t.jsx(Et,{controlStates:o})}),t.jsx(B,{children:t.jsx(ot,{style:{width:"100%",height:"95vh",maxHeight:"100vw"},data:[{labels:r,parents:l,values:u,ids:n,type:"sunburst",branchvalues:"total",maxdepth:3,sort:!1,marker:{line:{color:a.palette.background.paper},colors:c}}],config:{displayModeBar:!1,responsive:!0},layout:{margin:{l:0,r:0,b:0,t:0},paper_bgcolor:a.palette.mode==="dark"?"rgba(0,0,0,0)":void 0}})})]})},Bt=["company","format","franchise","name","platform","publisher","genre","rating","status","startDate"],Et=({controlStates:e})=>t.jsx(M,{children:e.map(([s,a],o)=>t.jsx(I,{options:Bt,value:s,setValue:a},"sunburst-control-"+o))}),Yt=(e,s,a)=>{const o=(x,j)=>{const p=x[j];return p instanceof Date?p.getFullYear().toString():p},n=e.filter(x=>!(a==="Hours"&&x.hours===void 0)).reduce((x,j)=>{const p=s.map(g=>o(j,g));if(!Mt(p))return x;let y=x;return p.forEach(g=>y=y[g]=y[g]||{}),y[j.name]=j,x},{}),r=[],l=[],u=[],c=[],d=[],i=(x,j)=>{let p=0,y="";return Object.entries(x).sort(([g],[b])=>g.localeCompare(b)).forEach(([g,b])=>{let v;jt(b)?(v=a==="Hours"?b.hours:1,s[0]==="company"&&(y=S(b))):[v,y]=i(b,`${j}-${g}`),l.push(g),u.push(j),c.push(v),r.push(`${j}-${g}`),d.push(y),p+=v}),[p,y]};return i(n,""),{labels:l,parents:u,values:c,ids:r,colours:d}},Vt={none:!0,company:!0,format:!0,franchise:!1,name:!1,platform:!0,developer:!1,publisher:!1,rating:!0,status:!0,genre:!0},wt=({data:e,measure:s})=>{const[a,o]=m.useState("company"),[n,r]=m.useState(!1),[l,u]=m.useState(!0),c=Rt(e,a,s,n);return t.jsx(lt,{grouped:c,cumulative:n,stack:l,children:t.jsx(F,{title:s==="Count"?"Games Played":"Hours Played",action:t.jsxs(M,{children:[t.jsx(I,{options:Object.keys(Vt),value:a,setValue:o}),t.jsxs(f,{direction:"row",children:[t.jsx(k,{label:"Cumulative",control:t.jsx(A,{checked:n,onChange:(d,i)=>r(i)})}),t.jsx(k,{label:"Stack",control:t.jsx(A,{checked:l,onChange:(d,i)=>u(i),disabled:n})})]})]})})})},Rt=(e,s,a,o)=>e.reduce((n,r)=>{var c,d;const l=s==="none"?"":r[s],u=o?(c=r.startDate)==null?void 0:c.toISOString().substring(0,7):(d=r.startDate)==null?void 0:d.getFullYear().toString();return!u||!r.hours||(n[l]??(n[l]={color:s==="company"?S(r):"",data:{}}),n[l].data[u]=(n[l].data[u]||0)+(a==="Count"?1:r.hours)),n},{}),It=({data:e})=>{const[s,a]=m.useState(!1),o=s?({company:r})=>r:()=>"*",n=e.filter(({exactDate:r,startDate:l})=>r&&l.getFullYear()>2014).map(r=>[o(r),r.name,_t(r),r.startDate,r.endDate??H]);return t.jsx(ct,{data:n,showRowLabels:s,children:t.jsx(F,{title:"Timeline",action:t.jsx(M,{row:!0,children:t.jsx(k,{label:"Group Data",control:t.jsx(A,{checked:s,onChange:(r,l)=>a(l)})})})})})},_t=e=>{var s,a;return`
<div style="display: flex; border: 1px solid black; background-color: ${S(e)}" class="backgroundPaper">
  <div style="flex: 0.6; white-space:nowrap; padding: 10px; "> 
    <b>${e.name}</b><br> 
    <hr />
    Hours: ${e.hours}<br> 
    Period: ${(s=e.startDate)==null?void 0:s.toLocaleDateString()} - ${((a=e.endDate)==null?void 0:a.toLocaleDateString())??"present"}<br> 
    Days: ${e.numDays??"-"}
  </div>
  ${e.banner?`
      <div style="flex: 1; min-width: 200px">
        <img src="${e.banner}"
        style="max-width: 100%; max-height: 200px;"> 
      </div>
   `:""}
</div>
`},Xt=({vgData:e,filterState:s,filterDispatch:a})=>e.length>0?t.jsxs(f,{spacing:2,children:[t.jsx(Ct,{data:e,yearTo:s.yearTo,measure:s.measure,filterDispatch:a}),t.jsx(It,{data:e}),t.jsx($t,{data:e,measure:s.measure}),t.jsx(wt,{data:e,measure:s.measure}),t.jsx(it,{MediaComponent:O,title:"All Games",data:e,width:4,colour:S})]}):t.jsx(D,{variant:"h1",textAlign:"center",children:"No Data Found"});export{Xt as default};
//# sourceMappingURL=Graphs-933b65c8.js.map
